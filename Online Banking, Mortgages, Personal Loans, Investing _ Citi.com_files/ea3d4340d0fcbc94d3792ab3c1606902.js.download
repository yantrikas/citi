Bootstrapper.bindImmediate(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("naAnalyticsPageView",function(){localStorage.removeItem("addRequestSent");var pageURL=document.location.pathname;if(pageURL.indexOf("newRecipient")>-1){if(!Array.prototype.includes)Object.defineProperty(Array.prototype,
"includes",{enumerable:false,value:function(obj){var newArr=this.filter(function(el){return el==obj});return newArr.length>0}});function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+name.length+1,endstr))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}
var guid=uuidv4();var authToken,bizToken,clientId,apimBaseUrl,appVersion="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!=null&&authCookie!==undefined&&authCookie.length>=2){authCookie=authCookie.split("|");authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]==undefined)appVersion=
authCookie[5].split("appVersion\x3d");apimBaseUrl=apimBaseUrl[1];authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");bizToken=getCookie("bizToken");clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}var ccid=_dl.ccid;if(!ccid)ccid="";var ecjson={"event":{"body":{"accountIdentifiers":[],"eventDetails":{"destinationTransferType":"Internationally","Country":"","Currency":"",
"isAbandoned":"Y","currentPageId":"","activityStatus":""},"deviceDetails":{"Platform":"Desktop","lob":"Cards/Bank/MRC","platform_type":"Web browser","user_agent":"","geo_location":""}}}};var pageName=citiData.pageName;var eventDetails={};eventDetails.currentPageId=pageName;try{}catch(err){}ecjson.event.body.eventDetails=eventDetails;var deviceDetails={};deviceDetails.Platform=citiData.platform;deviceDetails.lob=citiData.lob;deviceDetails.platform_type=citiData.platform_type;deviceDetails.user_agent=
"";deviceDetails.geo_location="";ecjson.event.body.deviceDetails=deviceDetails;function sendMessage(keyEntry,valueEntry){$.ajax({type:"POST",url:apimBaseUrl+"/retailbank/gcg/event/postEvent",dataType:"json",contentType:"application/json",data:valueEntry,beforeSend:function(xhr){xhr.setRequestHeader("eventName","EC_PAGE_LOAD_TOPIC");xhr.setRequestHeader("Authorization","Bearer "+authToken);xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("appVersion",
appVersion);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*");xhr.setRequestHeader("ccid",ccid)},success:function(){}})}$.ajaxSetup({cache:false});setTimeout(function(){$("citi-simple-layout").find(".btn-primary").eq(2).unbind("click").on("click",function(){ecjson.event.body.eventDetails.isAbandoned=
"Y";ecjson.event.body.eventDetails.activityStatus="ABANDONED";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))})},700);$.fn.isBound=function(type,fn){var data=this.data("events")[type];if(data===undefined||data.length===0)return false;return-1!==$.inArray(fn,data)};setTimeout(function(){$("citi-simple-layout").find(".btn-primary").first().on("click",function(){if($("#Internationally").is(":checked")){ecjson.event.body.eventDetails.destinationTransferType="Internationally";const countryValue=
parseInt(document.querySelector("#countryInfo").value)+1;ecjson.event.body.eventDetails.Country=document.querySelector("#countryInfo").options[countryValue].text;ecjson.event.body.eventDetails.Currency=document.querySelector("#currency").value}else ecjson.event.body.eventDetails.destinationTransferType="domestic"})},700);let lastUrl=document.location.href;(new MutationObserver(()=>{const url=document.location.href;if(url!==lastUrl&&document.location.href.indexOf("paymentHub/newRecipient/success")>
-1){lastUrl=url;onUrlChange()}})).observe(document,{subtree:true,childList:true});function onUrlChange(){if(localStorage.getItem("addRequestSent"))return;ecjson.event.body.eventDetails.isAbandoned="N";ecjson.event.body.eventDetails.activityStatus="COMPLETED";localStorage.setItem("addRequestSent","y");sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))}console.log("RTT NewPayeeWireTransfer")}})})},3705954,706463);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.citiData=window.citiData||{};var string1=window.citiData.lob||"";var colonLoc=string1.indexOf(":")||"";if(colonLoc>-1){var string2=string1.substr(0,colonLoc);window.citiData.lob=string2}else window.citiData.lob=string1;if(window.s)window.s.eVar30=citiData.lob},2366488,507276);
Bootstrapper.bindDependencyDOMParsed(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(document.querySelector(".tnt-at-element-marker")==null)try{var arr_tntDomains=["online.citi.com/US/ag/small-business-banking","online.citi.com/small-business-banking","online.citi.com/tandc","online.citi.com/US/ag/tandc",
"online.citi.com/homepage","loadtest.creditcards.citi.com"];var currentUrlSSR=window.location.href.toString();var citiSSRCheck=/citi.com\/$/.test(currentUrlSSR);if(document.readyState!="complete")$("head").addClass("tnt-at-element-marker");function isUrlInArray(urlList){var currentUrl=window.location.href.toString();var result=false;for(var i=0;i<urlList.length&&result===false;i++)if(currentUrl.indexOf(urlList[i])!=-1)result=true;return result}var addMbox_tnt=false;if(isUrlInArray(arr_tntDomains)){console.log("checking URL");
addMbox_tnt=true}if(!addMbox_tnt&&!citiSSRCheck)adobe.target.getOffer({"mbox":"target-global-mbox","success":function(offer){adobe.target.applyOffer({"mbox":"target-global-mbox","offer":offer})},"error":function(status,error){if(console&&console.log){console.log(status);console.log(error)}}});setTimeout(function(){$(".tnt-at-element-marker").removeClass("tnt-at-element-marker")},6E3)}catch(n){}})},3486389,[3039001],531459,[578278]);
Bootstrapper.bindImmediate(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var purl1=document.location.pathname;if(purl1.indexOf("fundtransfer/fundinitiate")!=-1||purl1.indexOf("fundtransfer/fundreview")!=-1){function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;
var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+name.length+1,endstr))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function setAccNumber(toAccNum){if(toAccNum){let cardTextArr=toAccNum.split("-");if(cardTextArr.length>1){let cNumber=cardTextArr[1];if(cNumber.indexOf("/")>0)cNumber=cNumber.split("/")[1];sessionStorage.tmsactNum=cNumber}}}
var guid=uuidv4();var ecjson={"event":{"body":{"accountIdentifiers":[{"accountIdentifier":"","accountIdType":"accountNumber"}],"eventDetails":{"currentPageId":""},"deviceDetails":{"Platform":"","lob":"","custType":"","userType":"","geo_location":""}}}};var d=new Date;var timestamp=d.toGMTString();var authToken,bizToken,clientId,apimBaseUrl,appVersion="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!==null&&authCookie!==undefined&&authCookie.length>=2){authCookie=authCookie.split("|");
authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]===undefined)appVersion=authCookie[5].split("appVersion\x3d");apimBaseUrl=apimBaseUrl[1];authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");bizToken=getCookie("bizToken");
clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}var toAccNum="";try{toAccNum=document.getElementById("todropdown-account").innerText}catch(err){toAccNum=""}setAccNumber(toAccNum);if(sessionStorage!=null&&sessionStorage.tmsactNum!=null)ecjson.event.body.accountIdentifiers[0].accountIdentifier=sessionStorage.tmsactNum;var pageURL=document.location.href;var pageName=citiData.pageName;var eventDetails={};eventDetails.currentPageId=pageName;ecjson.event.body.eventDetails=
eventDetails;var ccid=_dl.ccid;if(!ccid)ccid="";var deviceDetails={};deviceDetails.Platform=citiData.platform;deviceDetails.lob=citiData.lob;deviceDetails.custType=citiData.custType;deviceDetails.userType=citiData.userType;deviceDetails.geo_location="";ecjson.event.body.deviceDetails=deviceDetails;function sendMessage(keyEntry,valueEntry){var xhr=new XMLHttpRequest;var url=apimBaseUrl+"/retailbank/gcg/event/postEvent";xhr.open("POST",url,true);xhr.setRequestHeader("eventName","EC_PAGE_LOAD_TOPIC");
xhr.setRequestHeader("Authorization","Bearer "+authToken);xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("appVersion",appVersion);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*");xhr.setRequestHeader("ccid",ccid);xhr.send(valueEntry);
xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200);else;}}setTimeout(function(){if(pageURL.indexOf("fundtransfer")>-1)sendMessage("FUNDING_TRANSACTION RTT",JSON.stringify(ecjson))},500);console.log("FUNDING_TRANSACTION RTT ")}})},3578215,689979);
Bootstrapper.bindImmediate(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var pageURL=document.location.pathname;if(pageURL.indexOf("autopay")>-1){console.log("testing  autopay"+pageURL);if(!Array.prototype.includes)Object.defineProperty(Array.prototype,"includes",{enumerable:false,value:function(obj){var newArr=
this.filter(function(el){return el==obj});return newArr.length>0}});var PAGE_AUTOPAY=["us|web|secure|pay|enroll autopay|landing","us|web|secure|pay|edit autopay|start","us|web|secure|pay|enroll autopay|start","us|web|secure|pay|enroll autopay|verify","us|web|secure|pay|enroll autopay|complete"];function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+
name.length+1,endstr))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}var guid=uuidv4();var authToken,bizToken,clientId,apimBaseUrl,appVersion="";var accountId="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!=null&&authCookie!==undefined&&authCookie.length>=2){authCookie=authCookie.split("|");authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");
clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]==undefined)appVersion=authCookie[5].split("appVersion\x3d");apimBaseUrl=apimBaseUrl[1];authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");bizToken=getCookie("bizToken");clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}var ecjson=
{"event":{"body":{"accountIdentifiers":[{"accountIdentifier":"","accountIdType":"cltid"},{"accountIdentifier":"","accountIdType":"cardNumber"}],"eventDetails":{"currentPageId":"us|web|secure|pay|edit autopay|start","activityType":"edit autopay","activityStatus":"start"},"deviceDetails":{"Platform":"Desktop","lob":"Cards/Bank/MRC","platform_type":"Web browser","user_agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36","geo_location":""}}}};
if(Array.isArray(_dl.evarPageName)===true)var pageName=_dl.evarPageName.join("|");else var pageName=_dl.evarPageName;function includesPageName(){return PAGE_AUTOPAY.includes(pageName)}function getAbandonIndicator(){if(includesPageName())return pageName===PAGE_AUTOPAY[2]||pageName===PAGE_AUTOPAY[3]?"Y":"N";else return""}if(_dl){var eventDetails={};if(Array.isArray(_dl.evarPageName)===true)eventDetails.currentPageId=_dl.evarPageName.join("|");else eventDetails.currentPageId=_dl.evarPageName;if(_dl.evarPageName.length>
4){eventDetails.activityType=_dl.evarPageName[4];eventDetails.activityStatus=_dl.evarPageName[5];eventDetails.isAbandoned=getAbandonIndicator()}ecjson.event.body.eventDetails=eventDetails;var deviceDetails={};deviceDetails.Platform=_dl.Platform;deviceDetails.lob=_dl.lob;deviceDetails.platform_type=_dl.platform_type;deviceDetails.user_agent=_dl.user_agent;deviceDetails.geo_location="";ecjson.event.body.deviceDetails=deviceDetails}function isDelayRequired(){return pageName==PAGE_AUTOPAY[0]||pageName==
PAGE_AUTOPAY[2]}function setCardNumber(cardName){if(cardName){let cardTextArr=cardName.split("-");if(cardTextArr.length>1){let cNumber=cardTextArr[1];if(cNumber.indexOf("/")>0)cNumber=cNumber.split("/")[1];sessionStorage.tmsactNum=cNumber}}}function getAccountSessionId(selectedValue){if(sessionStorage!=null&&sessionStorage.sessionPostBrandingStorage!=null){let allAccounts=JSON.parse(sessionStorage.sessionPostBrandingStorage);let accountSessionId="";if(allAccounts!=null&&allAccounts!=undefined)allAccounts.accounts.forEach(function(item){if(item.completeDescription==
selectedValue){accountSessionId=item.accountInstanceId;sessionStorage.setItem("accId",accountSessionId)}})}if(sessionStorage!=null&&sessionStorage.accId!=null&&sessionStorage.accId!=undefined)accountId=sessionStorage.accId}function setCardNumberJSON(){let cardTextArr="";if($(".cardLabel").first().length)cardTextArr=$(".cardLabel").first().text();else if($("#SelectCardInfoHeader").length)cardTextArr=$("#SelectCardInfoHeader option:selected").text();else if($("#inputSingleCard").length)cardTextArr=
$("#inputSingleCard").text();setCardNumber(cardTextArr);getAccountSessionId(cardTextArr);ecjson.event.body.accountIdentifiers[1].accountIdentifier=sessionStorage.tmsactNum||"0000"}function hasRequiredValue(){setCardNumberJSON();return $(".cardLabel").first().length||$("#SelectCardInfoHeader").length||$("#inputSingleCard").length}setCardNumberJSON();function sendMessage(keyEntry,valueEntry){var xhr=new XMLHttpRequest;var url=apimBaseUrl+"/retailbank/gcg/event/postEvent";xhr.open("POST",url,true);xhr.setRequestHeader("eventName",
"EC_PAGE_LOAD_TOPIC");xhr.setRequestHeader("Authorization","Bearer "+authToken);xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("appVersion",appVersion);xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*");xhr.setRequestHeader("accountId",
accountId);xhr.send(valueEntry);xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200);else;}}if(includesPageName()){let max=8E3;let counter=0;(function wait(){if(hasRequiredValue())counter=max;if(isDelayRequired()&&counter<max){counter+=500;setTimeout(wait,500)}else{if(ecjson.event.body.accountIdentifiers[1].accountIdentifier!=null&&ecjson.event.body.accountIdentifiers[1].accountIdentifier!=undefined&&ecjson.event.body.accountIdentifiers[1].accountIdentifier!="")ecjson.event.body.accountIdentifiers[1].accountIdentifier=
ecjson.event.body.accountIdentifiers[1].accountIdentifier.replace(/[^\d.-]/g,"");sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))}})()}document.onclick=confirmChange;function confirmChange(e){if(e.target.tagName==="BUTTON"&&e.target.innerHTML==="Confirm"||e.target.tagName==="A"&&e.target.innerHTML==="Edit Series")setTimeout(function(){Bootstrapper.ensEvent.trigger("naAnalyticsPageView")},700)}}console.log("RTT AUTOPAY")})},3648773,632249);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var pageURL=document.location.pathname;if(pageURL.indexOf("flex-loan")>-1){if(!Array.prototype.includes)Object.defineProperty(Array.prototype,"includes",{enumerable:false,value:function(obj){var newArr=this.filter(function(el){return el==
obj});return newArr.length>0}});function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+name.length+1,endstr))}var guid=uuidv4();var ecjson={"event":{"body":{"accountIdentifiers":[{"accountIdentifier":"",
"accountIdType":"cltid"},{"accountIdentifier":"","accountIdType":"cardNumber"}],"eventDetails":{"currentPageId":"","activityType":"","activityStatus":""},"deviceDetails":{"Platform":"Desktop","lob":"Cards/Bank/MRC","platform_type":"Web browser","user_agent":"","geo_location":""}}}};ecjson.event.body.eventDetails.currentPageId=citiData.pageName;var authToken,bizToken,clientId,apimBaseUrl,appVersion="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!=null&&authCookie!==undefined&&authCookie.length>=
2){authCookie=authCookie.split("|");authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]==undefined)appVersion=authCookie[5].split("appVersion\x3d");apimBaseUrl=apimBaseUrl[1];authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");
bizToken=getCookie("bizToken");clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}var actNum="";var accountId,selectedAccount="";if(document.getElementById("cardDropdown")){var actSelector=document.getElementById("cardDropdown");if(actSelector!==undefined&&actSelector!==null){var actSelected=actSelector.getElementsByClassName("dropdownText")[0].textContent;selectedAccount=actSelector.getElementsByClassName("dropdownText")[0].textContent;actNum=
actSelected.split("-").pop();actNum=actNum.split(" ").pop();sessionStorage.tmsactNum=actNum}}var htmlblock=document.getElementsByClassName("card-name");if(htmlblock.length>0){var textContent=htmlblock[0].innerText;selectedAccount=htmlblock[0].innerText;var anStart=textContent.indexOf("Card")+6;var anEnd=anStart+4;actNum=textContent.slice(anStart,anEnd);sessionStorage.tmsactNum=actNum}ecjson.event.body.accountIdentifiers[1].accountIdentifier=sessionStorage.tmsactNum||"0000";var pageURL=document.location.href;
function getAccountSessionId(selectedValue){if(sessionStorage!=null&&sessionStorage.sessionPostBrandingStorage!=null){let allAccounts=JSON.parse(sessionStorage.sessionPostBrandingStorage);let accountSessionId="";if(allAccounts!=null&&allAccounts!=undefined)allAccounts.accounts.forEach(function(item){if(item.completeDescription.replace(/\s/g,"")==selectedValue.replace(/\s/g,"")){accountSessionId=item.accountInstanceId;sessionStorage.setItem("accId",accountSessionId)}})}if(sessionStorage!=null&&sessionStorage.accId!=
null&&sessionStorage.accId!=undefined)accountId=sessionStorage.accId}function sendMessage(keyEntry,valueEntry){$.ajax({type:"POST",url:apimBaseUrl+"/retailbank/gcg/event/postEvent",dataType:"json",contentType:"application/json",data:valueEntry,beforeSend:function(xhr){xhr.setRequestHeader("eventName","EC_PAGE_LOAD_TOPIC");xhr.setRequestHeader("Authorization","Bearer "+authToken);xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("appVersion",
appVersion);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*");xhr.setRequestHeader("accountId",accountId)},success:function(){}})}setTimeout(function(){if(pageURL.indexOf("flex-loan")>-1){getAccountSessionId(selectedAccount);sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))}},1100)}console.log("RTT FLEXLOAN")})},
3672881,599415);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var ids=[],dataLayerNs=""||"dataLayer",hasExecutedBaseCode=false;ids.push("DC-6260004");ids.push("DC-6269322");ids.push("DC-6256710");ids.push("DC-6415812");window[dataLayerNs]=window[dataLayerNs]||[];if(!window.gtag){window.gtag=function(){window[dataLayerNs].push(arguments)};gtag("js",new Date)}Bootstrapper.gtag=Bootstrapper.gtag||{};Bootstrapper.gtag.handleEvents=function(){for(var i=
0;i<Bootstrapper.gtag.events.length;i++)Bootstrapper.gtag.events[i]();Bootstrapper.gtag.events.splice(0,Bootstrapper.gtag.events.length)};Bootstrapper.gtag.events=Bootstrapper.gtag.events||[];Bootstrapper.gtag.events.push=function(){Array.prototype.push.apply(this,arguments);if(hasExecutedBaseCode)Bootstrapper.gtag.handleEvents();return};Bootstrapper.loadScriptCallback("//www.googletagmanager.com/gtag/js?id\x3d"+ids[0]+(dataLayerNs!=="dataLayer"?"\x26l\x3d"+dataLayerNs:""),function(){var configProperties=
{};if(""){configProperties.linker={"domains":"".split(",")};if(false)configProperties.linker.decorate_forms=false;if(false)configProperties.linker.url_position="fragment"}if(false){configProperties.dc_natural_search={};configProperties.dc_natural_search.exclusion_parameters=[];configProperties.dc_natural_search.engines={}}for(var i=0;i<ids.length;i++)gtag("config",ids[i],configProperties);hasExecutedBaseCode=true;Bootstrapper.gtag.handleEvents()})},3503384,639140);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(citiData.pageName.indexOf("nga cbol bank")>-1&&citiData.pageName.indexOf("application")>-1)Bootstrapper.ensEvent.trigger("ngaCbolBankAppPageView");var hostname1=document.location.hostname;var pathname1=document.location.pathname;pagename2=
citiData.pageName;var eventlist=citiData.eventList;pathname1=pathname1.toLowerCase();if((hostname1=="online.citi.com"||hostname1=="uat1.online.citi.com"||hostname1=="uat2.online.citi.com"||hostname1=="uat3.online.citi.com")&&(pathname1.indexOf("/open-cs-acct./funding/select-acct")!=-1||pathname1.indexOf("us/ag/funding/funded-approved")!=-1||pathname1.indexOf("us/ag/open-cs-acct/appl-declined")!=-1||pathname1.indexOf("us/ag/open-cs-acct/funding/pending")!=-1||pathname1.indexOf("us/ag/open-cs-acct/index")!=
-1||pathname1.indexOf("us/ag/open-cs-acct/funding/funded-approved")!=-1||pathname1.indexOf("us/ag/family/member")!=-1||pathname1.indexOf("us/ag/funding/pending")!=-1&&(pagename2=="nga cbol bank primary application - fund complete pended"||pagename2=="nga cbol bank joint application - fund complete pended")))Bootstrapper.ensEvent.trigger("naBankAppPageViewPreLogin");var funded=citiData.fundingAmount;if(citiData.fundingAmount)if(pagename2=="nxt - congratulations")Bootstrapper.ensEvent.trigger("naBankAppPageViewPreLogin_funded");
if(!citiData.fundingAmount)if(pagename2=="nxt - congratulations")Bootstrapper.ensEvent.trigger("naBankAppPageViewPreLogin_nonfunded");var pname1=citiData.pageName;var bprod=citiData.bankProdSourceCode;if(!eventlist)eventlist="";if(pname1=="nxt - personal info a1"&&eventlist.indexOf("bankAppStart")!=-1&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1)){Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_AppStart");
console.log("first App start trigger")}else if(pname1=="nxt - transfer funds"&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_Approval");else if(pname1=="nxt - pended single"&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_PendingSingle");
else if(pname1=="nxt - pended joint"&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_PendingJoint");else if(pname1=="nxt - declined overlay single"&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_DeclinedSingle");
else if(pname1=="nxt - declined overlay joint"&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_DeclinedJoint");else if(pname1=="nxt - congratulations"&&citiData.fundingAmount&&(bprod.indexOf("citi_accelerate_savings | access_account")!=-1||bprod.indexOf("citi_accelerate_savings|access_account")!=-1))Bootstrapper.ensEvent.trigger("CitiAccelerateSavings_AccessAccount_FundingConfirmation");
var furl=document.location.href;var cpname=citiData.pageName;if(furl.indexOf("online.citi.com/US/ag/open-cs-acct/index?formCode\x3ddeposit-ao")!=-1&&(cpname.indexOf("nxt - id verification")!=-1||cpname.indexOf("nxt - income and employment")!=-1||cpname.indexOf("nxt - agreements and disclosures")!=-1||cpname.indexOf("nxt - transfer funds")!=-1||cpname.indexOf("nxt - declined overlay")!=-1||cpname.indexOf("nxt - personal info")!=-1||cpname.indexOf("nxt - skip funding overlay")!=-1||cpname.indexOf("nxt - review funds transfer")!=
-1||cpname.indexOf("nxt - congratulations")!=-1||cpname.indexOf("nxt - time out warning")!=-1||cpname.indexOf("nxt - add bank account overlay")!=-1||cpname.indexOf("nxt - address change overlay")!=-1||cpname.indexOf("nxt - pended")!=-1||cpname.indexOf("nxt - no offer available")!=-1||cpname.indexOf("nxt - add debit card overlay")!=-1||cpname.indexOf("nxt - add bank account error overlay")!=-1||cpname.indexOf("nxt - error overlay")!=-1||cpname.indexOf("nxt - continue as single applicant overlay")!=
-1||cpname.indexOf("nxt - elevate overlay")!=-1||cpname.indexOf("nxt - cancel overlay")!=-1||cpname.indexOf("nxt - funding error overlay")!=-1||cpname.indexOf("nxt - application pended")!=-1||cpname.indexOf("nxt - documents uploaded incomplete: are you sure to exit")!=-1||cpname.indexOf("nxt - documents uploaded complete: finish and exit")!=-1))Bootstrapper.ensEvent.trigger("pebblepost_event");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/home-loan")!=-1&&cpname.indexOf("ps mortgage purchase lead")!=
-1&&cpname.indexOf("confirmation")!=-1&&cpname.indexOf("FTHB")!=-1)Bootstrapper.ensEvent.trigger("lead_FTHB_confirmation");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/home-loan")!=-1&&cpname.indexOf("ps mortgage purchase lead")!=-1&&cpname.indexOf("confirmation")!=-1&&cpname.indexOf("FTHB")==-1)Bootstrapper.ensEvent.trigger("ps_mortgage_purchase_lead_confirmation");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/mortgage-refinancing")!=-1&&cpname.indexOf("ps mortgage refinance lead")!=-1&&cpname.indexOf("confirmation")!=
-1)Bootstrapper.ensEvent.trigger("ps_mortgage_refinance_lead_confirmation");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/home-loan")!=-1&&cpname.indexOf("display mortgage purchase lead")!=-1&&cpname.indexOf("FTHB")!=-1&&cpname.indexOf("confirmation")!=-1)Bootstrapper.ensEvent.trigger("display_mortgage_purchase_lead_FTHB_confirmation");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/home-loan")!=-1&&cpname.indexOf("display mortgage purchase lead")!=-1&&cpname.indexOf("confirmation")!=-1&&cpname.indexOf("FTHB")==
-1)Bootstrapper.ensEvent.trigger("display_mortgage_purchase_lead_confirmation");if(furl.indexOf("mortgage.citi.com/cmi/mortgage/mortgage-refinancing")!=-1&&cpname.indexOf("display mortgage refinance lead")!=-1&&cpname.indexOf("confirmation")!=-1)Bootstrapper.ensEvent.trigger("display_mortgage_refinance_lead_confirmation")})},3716549,609397);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("naAnalyticsPageView",function(){if(!Array.prototype.includes)Object.defineProperty(Array.prototype,"includes",{enumerable:false,value:function(obj){var newArr=this.filter(function(el){return el==obj});return newArr.length>
0}});var PAGE_STATUS={"personal loan application":"ABANDONED","personal loan verify info":"ABANDONED","personal loan counter offer":"ABANDONED","personal loan decision pended":"ABANDONED","personal loan decision loan offered":"ABANDONED","personal loan verify income":"ABANDONED","personal loan completion":"CONFIRMED","personal loan document upload landing":"ABANDONED","personal loan add your files":"ABANDONED","personal loan document upload thanks":"ABANDONED","personal loan conditional approval":"ABANDONED",
"personal loan decision declined":"ABANDONED","personal loan single page offer confirmation":"ABANDONED","personal loan single page no offer confirmation":"ABANDONED","personal loan single page loan application summary":"ABANDONED","personal loan single page rejection confirmation":"ABANDONED","personal loan single page loan application counter offer summary":"ABANDONED","personal loan single page reviewing confirmation":"ABANDONED","personal loan single page confirmation":"CONFIRMED","personal loan single page application pending":"ABANDONED",
"personal loan single page application with offer":"ABANDONED","personal loan single page application counter offer to Approved":"ABANDONED","personal loan single page application with offer for cards":"ABANDONED","personal loan single page application with no offer for cards":"ABANDONED","personal loan single page application approved for cards":"ABANDONED","personal loan single page application declined for cards":"ABANDONED","personal loan single page application counter offer for cards":"ABANDONED",
"personal loan single page application pending for cards":"ABANDONED","personal loan single page application funds disbursement for cards":"COMPLETE","personal loan single page application counter offer to approved for cards":"ABANDONED","personal loan single page application with no offer":"ABANDONED","personal loan single page application approved":"ABANDONED","personal loan single page application declined":"DECLINED","personal loan single page application counter offer":"ABANDONED","personal loan single page application funds disbursement":"COMPLETE",
"personal loan single page application counter offer to approved":"ABANDONED","personal loan single page application missing information":"ABANDONED","personal loan multi page application with offer - loan tuner":"ABANDONED","personal loan multi page application with no offer - loan tuner":"ABANDONED","personal loan multi page application - lets get started":"ABANDONED","personal loan multi page application - contact information":"ABANDONED","personal loan multi page application - employment information":"ABANDONED",
"personal loan multi page application - bank information":"ABANDONED","personal loan multi page application - add a bank account":"ABANDONED","personal loan multi page application - review and apply":"ABANDONED","personal loan multi page application approved":"ABANDONED","personal loan multi page application - approved":"ABANDONED","personal loan multi page application - pending":"ABANDONED","personal loan multi page application - declined":"ABANDONED","personal loan multi page application - counter offer":"ABANDONED",
"US MobileApp|My Accounts|Bank|Pil Application|Select File to Upload:":"ABANDONED","US MobileApp|My Accounts|Bank|Pil Application|Credit Report Overlay":"ABANDONED","Personal loan - digital re-entry - Approved":"ABANDONED","personal loan booked":"COMPLETED","personal loan closed":"COMPLETED","personal loan - digital re-entry - multiple loan application page":"ABANDONED","Personal loan - digital re-entry - pending":"ABANDONED","Personal loan - digital re-entry - declined":"ABANDONED","personal loan - digital re-entry - declined":"ABANDONED",
"personal loan - digital re-entry - pending":"ABANDONED","personal loan multi page application - funds disbursement":"COMPLETED","personal loan - decline offer overlay":"ABANDONED","personal loan multi page application - withdrawn":"ABANDONED","Personal loan multi page application - closed":"COMPLETED","personal loan single page application Application Withdrawn for cards":"COMPLETED","personal loan single page application Application Withdrawn":"COMPLETED","personal loan single page applications funds disbursement for cards":"COMPLETED"};
function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+name.length+1,endstr))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}var guid=uuidv4();var authToken,bizToken,clientId,apimBaseUrl,appVersion="";var authToken,bizToken,clientId,apimBaseUrl,
appVersion="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!=null&&authCookie!==undefined&&authCookie.length>=2){authCookie=authCookie.split("|");authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]==undefined)appVersion=authCookie[5].split("appVersion\x3d");apimBaseUrl=apimBaseUrl[1];
authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");bizToken=getCookie("bizToken");clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}var cPageName=citiData.pageName||"na";var lob=citiData.lob||"";function includesPageName(){let page_names=Object.keys(PAGE_STATUS);return page_names.includes(cPageName)}function getActivityType(){if(includesPageName())return PAGE_STATUS[cPageName]}
var ecjson={"event":{"body":{"accountIdentifiers":[{"accountIdentifier":"","accountIdType":"cltid"},{"accountIdentifier":"","accountIdType":"cardNumber"},{"accountIdentifier":"","accountIdType":"dltid"},{"accountIdentifier":"","accountIdType":"accountNumber"}],"NotificationDetails":{"startDate":"","endDate":"","referenceNumber":"","currentPageId":"","activityType":"TEMP","activityStatus":"","isAbandoned":"Y","loanAmount":"","apr":"","paymentAmount":"","applicationStatus":"","loanStatus":"","lob":""}}}};
ecjson.event.body.NotificationDetails.activityType=getActivityType();ecjson.event.body.NotificationDetails.currentPageId=cPageName;ecjson.event.body.NotificationDetails.lob=lob;var pathName=window.location.pathname;try{let accountArr="";accountArr=pathName.split("/");if(accountArr.length>1){let val=accountArr[accountArr.length-1];let regexp=/^(?=.*[a-zA-Z])(?=.*[0-9])/;let valid=regexp.test(val);if(valid==true)sessionStorage.setItem("accId",accountArr[accountArr.length-1])}}catch(err){}var accountId=
"";if(sessionStorage!=null&&sessionStorage.accId!=null&&sessionStorage.accId!=undefined)accountId=sessionStorage.accId;$(".noOffer_continue_button").find(".btn-primary").on("click",function(){const loanAmount="$"+document.querySelector("#loanAmountInput").value;const apr=document.querySelector(".aprLabelValue").innerHTML;const monthlyPayment=document.querySelector(".monthlyPaymentValue").innerHTML.trim();ecjson.event.body.NotificationDetails.loanAmount="$"+document.querySelector("#loanAmountInput").value;
ecjson.event.body.NotificationDetails.apr=document.querySelector(".aprLabelValue").innerHTML;ecjson.event.body.NotificationDetails.paymentAmount=document.querySelector(".monthlyPaymentValue").innerHTML.trim();localStorage.setItem("loanAmountInput",loanAmount);localStorage.setItem("apr",apr);localStorage.setItem("monthlyPayment",monthlyPayment)});$(".continue_button").find(".btn-primary").on("click",function(){const loanAmount="$"+document.querySelector("#loanAmountInput").value;const apr=document.getElementsByClassName("lt-tunedPaymentData selected")[0].getElementsByClassName("lt-tpAPR")[0].innerHTML;
const monthlyPayment=document.getElementsByClassName("lt-tunedPaymentData selected")[0].getElementsByClassName("lt-tpMonthlyPayment")[0].innerHTML;ecjson.event.body.NotificationDetails.loanAmount="$"+document.querySelector("#loanAmountInput").value;ecjson.event.body.NotificationDetails.apr=document.getElementsByClassName("lt-tunedPaymentData selected")[0].getElementsByClassName("lt-tpAPR")[0].innerHTML;ecjson.event.body.NotificationDetails.paymentAmount=document.getElementsByClassName("lt-tunedPaymentData selected")[0].getElementsByClassName("lt-tpMonthlyPayment")[0].innerHTML;
localStorage.setItem("loanAmountInput",loanAmount);localStorage.setItem("apr",apr);localStorage.setItem("monthlyPayment",monthlyPayment)});setTimeout(function(){$(".apply-button").find(".btn-primary").unbind("click").on("click",function(){const loanAmount="$"+document.querySelector("#loanAmountInput").value;if(document.querySelectorAll(".fontFifteen").length>0){const apr=document.querySelectorAll(".fontFifteen")[1].textContent;const monthlyPayment=document.querySelectorAll(".fontFifteen")[0].textContent;
localStorage.setItem("apr",apr);localStorage.setItem("monthlyPayment",monthlyPayment);ecjson.event.body.NotificationDetails.apr=document.querySelectorAll(".fontFifteen")[1].textContent;ecjson.event.body.NotificationDetails.paymentAmount=document.querySelectorAll(".fontFifteen")[0].textContent}else{const apr=document.getElementsByClassName("lt-tunedPaymentData selected")[0].textContent.split(" ")[2];const monthlyPayment=document.getElementsByClassName("lt-tunedPaymentData selected")[0].textContent.split(" ")[0].split("/")[0];
localStorage.setItem("apr",apr);localStorage.setItem("monthlyPayment",monthlyPayment);ecjson.event.body.NotificationDetails.apr=document.getElementsByClassName("lt-tunedPaymentData selected")[0].textContent.split(" ")[2];ecjson.event.body.NotificationDetails.paymentAmount=document.getElementsByClassName("lt-tunedPaymentData selected")[0].textContent.split(" ")[0].split("/")[0]}ecjson.event.body.NotificationDetails.loanAmount="$"+document.querySelector("#loanAmountInput").value;localStorage.setItem("loanAmountInput",
loanAmount)})},700);if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application approved"){const loanAmount=document.querySelectorAll(".spa")[1].textContent.trim();localStorage.setItem("loanAmountInput",loanAmount);ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".spa")[1].textContent.trim();const apr=document.querySelectorAll(".spa")[3].textContent.trim();localStorage.setItem("apr",apr);ecjson.event.body.NotificationDetails.apr=document.querySelectorAll(".spa")[3].textContent.trim();
const monthlyPayment=document.querySelectorAll(".spa")[7].textContent.trim();localStorage.setItem("monthlyPayment",monthlyPayment);ecjson.event.body.NotificationDetails.monthlyPayment=document.querySelectorAll(".spa")[7].textContent.trim();ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType=
"START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application approved for cards"){const loanAmount=document.querySelectorAll(".spa")[1].textContent.trim();localStorage.setItem("loanAmountInput",loanAmount);ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".spa")[1].textContent.trim();const apr=document.querySelectorAll(".spa")[3].textContent.trim();localStorage.setItem("apr",
apr);ecjson.event.body.NotificationDetails.apr=document.querySelectorAll(".spa")[3].textContent.trim();const monthlyPayment=document.querySelectorAll(".spa")[7].textContent.trim();localStorage.setItem("monthlyPayment",monthlyPayment);ecjson.event.body.NotificationDetails.monthlyPayment=document.querySelectorAll(".spa")[7].textContent.trim();ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus=
"ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}$("#reverse-cta-order").find(".btn-link").first().on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned=
"Y"});$("#reverse-cta-order").find(".btn-link").eq(2).on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"});$("#reverse-cta-order").find(".btn-primary").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus=
"Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});$("#declineLoanButton").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus=
"COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});$("#returnToLoanApprovalButton").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application funds disbursement"){ecjson.event.body.NotificationDetails.applicationStatus=
"Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N";ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".cbolui-table-tablebody-col")[1].textContent;const loanAmount=document.querySelectorAll(".cbolui-table-tablebody-col")[1].textContent;localStorage.setItem("loanAmountInput",loanAmount)}if(ecjson.event.body.NotificationDetails.currentPageId===
"personal loan single page application funds disbursement for cards"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N";ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".cbolui-table-tablebody-col")[1].textContent;const loanAmount=
document.querySelectorAll(".cbolui-table-tablebody-col")[1].textContent;localStorage.setItem("loanAmountInput",loanAmount)}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application declined"){ecjson.event.body.NotificationDetails.applicationStatus="Declined";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned=
"N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application declined for cards"){ecjson.event.body.NotificationDetails.applicationStatus="Declined";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan application declined"){ecjson.event.body.NotificationDetails.applicationStatus=
"Declined";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan - digital re-entry - declined"){ecjson.event.body.NotificationDetails.applicationStatus="Declined";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus=
"COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application - declined"){ecjson.event.body.NotificationDetails.applicationStatus="Declined";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned=
"N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan booked"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan closed"){ecjson.event.body.NotificationDetails.applicationStatus=
"Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application funds disbursement for cards"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";
ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application funds disbursement"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType=
"END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application - funds disbursement"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N";ecjson.event.body.NotificationDetails.loanAmount=
document.querySelectorAll(".loanSummaryValue")[0].textContent;const loanAmount=document.querySelectorAll(".loanSummaryValue")[0].textContent;localStorage.setItem("loanAmountInput",loanAmount)}if(ecjson.event.body.NotificationDetails.currentPageId==="Personal loan multi page application - closed"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType=
"END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page applications funds disbursement for cards"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId===
"personal loan multi page application - pending"){ecjson.event.body.NotificationDetails.applicationStatus="Pending";ecjson.event.body.NotificationDetails.loanStatus="Pending";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application pending for cards"){ecjson.event.body.NotificationDetails.applicationStatus=
"Pending";ecjson.event.body.NotificationDetails.loanStatus="Pending";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application pending"){ecjson.event.body.NotificationDetails.applicationStatus="Pending";ecjson.event.body.NotificationDetails.loanStatus="Pending";ecjson.event.body.NotificationDetails.activityStatus=
"ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan decision pended"){ecjson.event.body.NotificationDetails.applicationStatus="Pending";ecjson.event.body.NotificationDetails.loanStatus="Pending"}if(ecjson.event.body.NotificationDetails.currentPageId==="Personal loan - digital re-entry - pending"){ecjson.event.body.NotificationDetails.applicationStatus="Pending";
ecjson.event.body.NotificationDetails.loanStatus="Pending";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan - decline offer overlay"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus=
"ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application - withdrawn"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned=
"N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application Application Withdrawn for cards"){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan single page application Application Withdrawn"){ecjson.event.body.NotificationDetails.applicationStatus=
"Approved";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application with no offer - loan tuner"){ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned=
"Y"}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application - review and apply"){const loanAmount=document.querySelectorAll(".loanAmountValue")[0].innerHTML.trim();localStorage.setItem("loanAmountInput",loanAmount);ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".loanAmountValue")[0].innerHTML.trim();const apr=document.querySelectorAll(".aprvalue")[0].innerHTML.trim();localStorage.setItem("apr",apr);ecjson.event.body.NotificationDetails.apr=
document.querySelectorAll(".aprvalue")[0].innerHTML.trim();const monthlyPayment=document.querySelectorAll(".monthlyPaymentValue")[0].innerHTML.trim();localStorage.setItem("monthlyPayment",monthlyPayment);ecjson.event.body.NotificationDetails.monthlyPayment=document.querySelectorAll(".monthlyPaymentValue")[0].innerHTML.trim()}if(ecjson.event.body.NotificationDetails.currentPageId==="personal loan multi page application - approved"){const loanAmount=document.querySelectorAll(".loanSummaryValue")[0].innerHTML.trim();
localStorage.setItem("loanAmountInput",loanAmount);ecjson.event.body.NotificationDetails.loanAmount=document.querySelectorAll(".loanSummaryValue")[0].innerHTML.trim();const apr=document.querySelectorAll(".loanSummaryValue")[3].innerHTML.trim();localStorage.setItem("apr",apr);ecjson.event.body.NotificationDetails.apr=document.querySelectorAll(".loanSummaryValue")[3].innerHTML.trim();const monthlyPayment=document.querySelectorAll(".loanSummaryValue")[1].innerHTML.trim();localStorage.setItem("monthlyPayment",
monthlyPayment);ecjson.event.body.NotificationDetails.monthlyPayment=document.querySelectorAll(".loanSummaryValue")[1].innerHTML.trim();ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"}$(".reviewPageCta").find("btn-primary").on("click",
function(){ecjson.event.body.NotificationDetails.applicationStatus="Applied";ecjson.event.body.NotificationDetails.loanStatus="Pending"});$(".accept-button-enabled").find("btn-primary").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Accepted";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned=
"N";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});$(".decline-button").find("btn-link").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y"});$("#declineLoanButton").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus=
"Approved";ecjson.event.body.NotificationDetails.loanStatus="Declined";ecjson.event.body.NotificationDetails.activityStatus="COMPLETED";ecjson.event.body.NotificationDetails.activityType="END";ecjson.event.body.NotificationDetails.isAbandoned="N";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});$("#returnToLoanApprovalButton").on("click",function(){ecjson.event.body.NotificationDetails.applicationStatus="Approved";ecjson.event.body.NotificationDetails.loanStatus="Approved yet to be accepted";
ecjson.event.body.NotificationDetails.activityStatus="ABANDONED";ecjson.event.body.NotificationDetails.activityType="START";ecjson.event.body.NotificationDetails.isAbandoned="Y";sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))});function setReferenceNumber(){var loanHeading=$("#loan-decision-pended").find("h4").text();if(loanHeading){var matches=loanHeading.match(/(\d+)/);if(matches)ecjson.event.body.NotificationDetails.referenceNumber=matches[0]}}function setCardNumber(cardName){if(cardName){let cardTextArr=
cardName.split("-");if(cardTextArr.length>1){let cNumber=cardTextArr[1];if(cNumber.indexOf("/")>0)cNumber=cNumber.split("/")[1];sessionStorage.tmsactNum=cNumber}}}function isDelayRequired(){let page_names=Object.keys(PAGE_STATUS);return citiData.pageName==page_names[3]}function setCardNumberJSON(){let cardTextArr="";if($("#cardnameSC\x3eh4").length)cardTextArr=$("#cardnameSC\x3eh4").text();else if($("#accountDropdown").length)cardTextArr=$("#accountDropdown").text();setCardNumber(cardTextArr);if(citiData.lob==
"BANK")ecjson.event.body.accountIdentifiers[3].accountIdentifier=sessionStorage.tmsactNum||"0000";else ecjson.event.body.accountIdentifiers[2].accountIdentifier=sessionStorage.tmsactNum||"0000";if(ecjson.event.body.accountIdentifiers[2].accountIdentifier=="0000")ecjson.event.body.accountIdentifiers[2].accountIdentifier=""}function hasRequiredValue(){setCardNumberJSON();return $("#cardnameSC\x3eh4").length>0&&$("#cardnameSC\x3eh4").text()!=""}setCardNumberJSON();function sendMessage(keyEntry,valueEntry){$.ajax({type:"POST",
url:apimBaseUrl+"/retailbank/gcg/event/postEvent",dataType:"json",contentType:"application/json",data:valueEntry,beforeSend:function(xhr){xhr.setRequestHeader("eventName","EC_PERSONAL_INS_LOAN_TOPIC");xhr.setRequestHeader("Authorization","Bearer "+authToken);xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("appVersion",appVersion);
xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*")},success:function(){}})}ecjson.event.body.NotificationDetails.loanAmount=localStorage.getItem("loanAmountInput")||"";ecjson.event.body.NotificationDetails.apr=localStorage.getItem("apr")||"";ecjson.event.body.NotificationDetails.paymentAmount=localStorage.getItem("monthlyPayment")||"";if(includesPageName()){let max=8E3;let counter=0;(function wait(){if(hasRequiredValue())counter=
max;if(isDelayRequired()&&counter<max){counter+=500;setTimeout(wait,500)}else sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))})()}});console.log("PIL RTT")})},3729072,629918);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"\x3d");if(index===-1)return null;var endstr=c.indexOf(";",index);if(endstr===-1)endstr=c.length;return unescape(c.substring(index+name.length+1,endstr))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}var guid=uuidv4();var ecjson={"event":{"body":{"accountIdentifiers":[{"accountIdentifier":"","accountIdType":"accountNumber"}],"eventDetails":{"currentPageId":"FundsTransfer payment request submitted","activityType":"COMPLETED","activityStatus":"END","transferAmount":""},"deviceDetails":{"Platform":"Desktop","lob":"Cards/Bank/MRC","platform_type":"Web browser","user_agent":"","geo_location":"","custType":""}}}};var authToken,
bizToken,clientId,apimBaseUrl,appVersion="";var authCookie=getCookie("NGACoExistenceCookie");if(authCookie!=null&&authCookie!==undefined&&authCookie.length>=2){authCookie=authCookie.split("|");authToken=authCookie[0].split("authToken\x3d");bizToken=authCookie[1].split("bizToken\x3d");clientId=authCookie[2].split("clientId\x3d");apimBaseUrl=authCookie[3].split("apimBaseUrl\x3d");appVersion=authCookie[4].split("appVersion\x3d");if(appVersion[1]==undefined)appVersion=authCookie[5].split("appVersion\x3d");
apimBaseUrl=apimBaseUrl[1];authToken=authToken[1];bizToken=bizToken[1];appVersion=appVersion[1];clientId=clientId[1]}else{authToken=getCookie("Authorization");bizToken=getCookie("bizToken");clientId=getCookie("client_id");apimBaseUrl=getCookie("apimBaseUrl");appVersion=getCookie("appVersion")}if(citiData.pageName!=null&&citiData.pageName!==undefined)ecjson.event.body.eventDetails.currentPageId=citiData.pageName;var deviceDetails={};deviceDetails.Platform=citiData.platform;deviceDetails.lob=citiData.lob;
deviceDetails.platform_type=citiData.platform;deviceDetails.user_agent="";deviceDetails.geo_location="";deviceDetails.custType=citiData.custType;ecjson.event.body.deviceDetails=deviceDetails;function sendMessage(keyEntry,valueEntry){$.ajax({type:"POST",url:apimBaseUrl+"/retailbank/gcg/event/postEvent",dataType:"json",contentType:"application/json",data:valueEntry,beforeSend:function(xhr){xhr.setRequestHeader("eventName","EC_PAGE_LOAD_TOPIC");xhr.setRequestHeader("Authorization","Bearer "+authToken);
xhr.setRequestHeader("businessCode","GCB");xhr.setRequestHeader("bizToken",bizToken);xhr.setRequestHeader("appVersion",appVersion);xhr.setRequestHeader("countryCode","US");xhr.setRequestHeader("uuid",guid);xhr.setRequestHeader("client_id",clientId);xhr.setRequestHeader("channelId","CBOL");xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("Access-Control-Allow-Origin","*")},success:function(){}})}if(document.getElementById("staticGroup1-wrapper")){var toAccount=document.getElementById("staticGroup1-wrapper").getElementsByClassName("col-xs-4")[5].textContent||
"";var toAccountNum=toAccount.split(":")[1].trim();ecjson.event.body.accountIdentifiers[0].accountIdentifier=toAccountNum;var transferAmount=document.getElementById("staticGroup1-wrapper").getElementsByClassName("col-xs-4")[9].innerText;transferAmount=transferAmount.replace("$","");transferAmount=transferAmount.replace(/,/g,"");transferAmount=transferAmount.trim();if(toAccount.indexOf("hecking")>-1){ecjson.event.body.eventDetails.transferAmount=transferAmount;sendMessage("fundTransfer_jsonDataLayer",
JSON.stringify(ecjson))}}else if(document.getElementById("toAccount")!==null&&document.getElementById("toAccount")!==undefined){var transferAmount=document.getElementById("transHstTotalTransferAmountHead").textContent;transferAmount=transferAmount.replace("$","");transferAmount=transferAmount.replace(/,/g,"");transferAmount=transferAmount.trim();var toAccountNum=document.getElementById("toAccount").textContent.split("-")[1].trim();var toAccount=document.getElementById("toAccount").textContent.split("-")[0].trim();
ecjson.event.body.accountIdentifiers[0].accountIdentifier=toAccountNum;if(toAccount.indexOf("hecking")>-1)setTimeout(function(){$("#transferNowCTA").on("click",function(){ecjson.event.body.eventDetails.transferAmount=transferAmount;ecjson.event.body.accountIdentifiers[0].accountIdentifier=toAccountNum})},700);let lastUrl=document.location.href;(new MutationObserver(()=>{const url=document.location.href;if(url!==lastUrl&&document.location.href.indexOf("lat-transfer/confirm")>-1)if(document.getElementById("toAccountId").textContent.split("-")[0].trim().indexOf("hecking")>
-1){lastUrl=url;onUrlChange()}})).observe(document,{subtree:true,childList:true});function onUrlChange(){ecjson.event.body.eventDetails.currentPageId=citiData.pageName;sendMessage("test_jsonDataLayer",JSON.stringify(ecjson))}}console.log("FUND TRANSFER RTT")})},3729067,607856);
Bootstrapper.bindDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var url1=document.location.pathname;if(url1.indexOf("/credit-cards/home")==-1){var citiData=window.citiData||{};var s=window.s||{};var _dl=window._dl||{};var trackRFactivity=function(){var scpagename=citiData.pageName||s.pageName||"";var cuuid=citiData.cuuid||s.eVar62||"";var channel=citiData.channel||"";var sitesection2=citiData.siteSection2||"";var url=window.top.location.href;
var rando=Math.floor(Math.random()*2E3);var cavalue="20766699";var bankAppStatus=citiData.bankAppStatus||"";scpagename=scpagename.replace(/[^0-9a-zA-Z]/g,"").toLowerCase();channel=channel.replace(/[^0-9a-zA-Z]/g,"").toLowerCase();sitesection2=sitesection2.replace(/[^0-9a-zA-Z]/g,"").toLowerCase();if(scpagename.indexOf("ngacbolbank")>-1&&scpagename.indexOf("applicationreceived")>-1)scpagename+="_"+bankAppStatus;if(scpagename=="personalloansinglepageapplicationwithoffer")cavalue="20839693";else if(scpagename==
"personalloanmultipageapplicationwithnoofferloantuner")cavalue="20839694";else if(scpagename=="personalloanmultipageapplicationwithofferloantuner")cavalue="20839695";else if(scpagename=="personalloansinglepageapplicationapprovedforcards")cavalue="20839696";else if(scpagename=="personalloansinglepageapplicationapproved")cavalue="20839697";else if(scpagename=="personalloanmultipageapplicationapproved")cavalue="20839698";else if(scpagename=="personalloanmultipageapplicationpending")cavalue="20839699";
else if(scpagename=="personalloansinglepageapplicationpendingforcards")cavalue="20839700";else if(scpagename=="personalloansinglepageapplicationpending")cavalue="20839701";else if(scpagename=="personalloansinglepageapplicationdeclinedforcards")cavalue="20839702";else if(scpagename=="personalloansinglepageapplicationdeclined")cavalue="20839703";else if(scpagename=="personalloanmultipageapplicationdeclined")cavalue="20839705";else if(scpagename=="personalloanapplicationdeclined")cavalue="20839704";
else if(scpagename=="personalloansinglepageapplicationcounterofferforcards")cavalue="20839706";else if(scpagename=="personalloansinglepageapplicationcounteroffer")cavalue="20839707";else if(scpagename=="personalloansinglepageapplicationcounteroffertoapproved")cavalue="20839708";else if(scpagename=="personalloanmultipageapplicationcounteroffer")cavalue="20839709";else if(scpagename=="personalloanmultipageapplicationcounteroffertoapproved")cavalue="20839710";var urlParams=new URLSearchParams(window.location.search);
var plist=urlParams.get("product_list");var package1=urlParams.get("package");(function(){var w=window,d=document;var s=d.createElement("script");s.setAttribute("async","true");s.setAttribute("type","text/javascript");s.setAttribute("src","//c1.rfihub.net/js/tc.min.js");var f=d.getElementsByTagName("script")[0];f.parentNode.insertBefore(s,f);if(typeof w._rfi!=="function")w._rfi=function(){w._rfi.commands=w._rfi.commands||[];w._rfi.commands.push(arguments)};_rfi("setArgs","ver","9");_rfi("setArgs",
"ra",rando);_rfi("setArgs","rb","648");_rfi("setArgs","ca",cavalue);_rfi("setArgs","_o","17169175");_rfi("setArgs","_t",scpagename);_rfi("setArgs","_rev","1");_rfi("setArgs","_pcode","1");_rfi("setArgs","_orderid","1");_rfi("setArgs","ssv_cuuid",cuuid);_rfi("setArgs","ssv_package",package1);_rfi("setArgs","ssv_prodlist",plist);_rfi("setArgs","ssv_pagename",scpagename);_rfi("track")})()};var ispageangular=false;if(citiData.pageDef)if(citiData.pageDef.indexOf("angular")>-1)ispageangular=true;if(citiData.pageName==
"Homepage"||_dl.spa_page=="true"||_dl.spa_page==true)ispageangular=true;if(ispageangular)Bootstrapper.ensEvent.add("naAnalyticsPageView",function(){trackRFactivity()});else trackRFactivity()}},3724319,494437);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var url1=document.location.pathname;if((!window.bk_async||typeof window.bk_async=="undefined")&&url1.indexOf("/credit-cards/home")==-1){window.bk_async=function(){bk_use_multiple_iframes=true;bk_allow_multiple_calls=true;bk_addPageCtx("language",
citiData.pageLanguage);bk_addPageCtx("product",citiData.custProdString);bk_addPageCtx("event",citiData.eventList);bk_addPageCtx("category",citiData.pageCat);bk_addPageCtx("page",citiData.pageName);bk_addPageCtx("section1",citiData.siteSection1);bk_addPageCtx("section2",citiData.siteSection2);bk_addPageCtx("section3",citiData.siteSection3);bk_addPageCtx("section4",citiData.siteSection4);bk_addPageCtx("bankappstatus",citiData.bankAppStatus);bk_addPageCtx("productID",citiData.prodID);BKTAG.doTag(63068,
10)};(function(){var scripts=document.getElementsByTagName("script")[0];var s=document.createElement("script");s.async=true;s.src="https://tags.bkrtx.com/js/bk-coretag.js";scripts.parentNode.insertBefore(s,scripts)})()}})},3669945,609396);
Bootstrapper.bindDependencyImmediate(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.AF.push(["call","s","exec"])})},2929498,[3507689],486892,[359214]);
Bootstrapper.bindImmediate(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.trigger("naAnalyticsFloodLightPageView")})},2897286,600937);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"\x3d");if(parts.length==2)return parts.pop().split(";").shift()}var localCcsId=getCookie("CCSID")||"";citiData=window.citiData||[];if(localCcsId.length<2)localCcsId=citiData.ccsid||"";var rawCCSID=localCcsId||"";function buildTag(hashed_CCSID){var srTag="//sr.rlcdn.com/425466.html?es\x3d80676\x26u\x3d"+
hashed_CCSID;return srTag}function callTag(tag){var iframe=document.createElement("iframe");iframe.name="_rlcdn";iframe.height=0;iframe.width=0;iframe.frameBorder=0;iframe.src=tag;iframe.style.display="none";iframe.title="_";document.body.appendChild(iframe)}function SHA1(msg){function rotate_left(n,s){var t4=n<<s|n>>>32-s;return t4}function lsb_hex(val){var str="";var i;var vh;var vl;for(i=0;i<=6;i+=2){vh=val>>>i*4+4&15;vl=val>>>i*4&15;str+=vh.toString(16)+vl.toString(16)}return str}function cvt_hex(val){var str=
"";var i;var v;for(i=7;i>=0;i--){v=val>>>i*4&15;str+=v.toString(16)}return str}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128)utftext+=String.fromCharCode(c);else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}
var blockstart;var i,j;var W=new Array(80);var H0=1732584193;var H1=4023233417;var H2=2562383102;var H3=271733878;var H4=3285377520;var A,B,C,D,E;var temp;msg=Utf8Encode(msg);var msg_len=msg.length;var word_array=new Array;for(i=0;i<msg_len-3;i+=4){j=msg.charCodeAt(i)<<24|msg.charCodeAt(i+1)<<16|msg.charCodeAt(i+2)<<8|msg.charCodeAt(i+3);word_array.push(j)}switch(msg_len%4){case 0:i=2147483648;break;case 1:i=msg.charCodeAt(msg_len-1)<<24|8388608;break;case 2:i=msg.charCodeAt(msg_len-2)<<24|msg.charCodeAt(msg_len-
1)<<16|32768;break;case 3:i=msg.charCodeAt(msg_len-3)<<24|msg.charCodeAt(msg_len-2)<<16|msg.charCodeAt(msg_len-1)<<8|128;break}word_array.push(i);while(word_array.length%16!=14)word_array.push(0);word_array.push(msg_len>>>29);word_array.push(msg_len<<3&4294967295);for(blockstart=0;blockstart<word_array.length;blockstart+=16){for(i=0;i<16;i++)W[i]=word_array[blockstart+i];for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);A=H0;B=H1;C=H2;D=H3;E=H4;for(i=0;i<=19;i++){temp=rotate_left(A,
5)+(B&C|~B&D)+E+W[i]+1518500249&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=20;i<=39;i++){temp=rotate_left(A,5)+(B^C^D)+E+W[i]+1859775393&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=40;i<=59;i++){temp=rotate_left(A,5)+(B&C|B&D|C&D)+E+W[i]+2400959708&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=60;i<=79;i++){temp=rotate_left(A,5)+(B^C^D)+E+W[i]+3395469782&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}H0=H0+A&4294967295;H1=H1+B&4294967295;H2=H2+C&4294967295;H3=
H3+D&4294967295;H4=H4+E&4294967295}var temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4);return temp.toLowerCase()}var normedCCSID=rawCCSID.toLowerCase().replace(/\s/g,"");var sha1HashedCCSID=SHA1(normedCCSID);var srTag=buildTag(sha1HashedCCSID);callTag(srTag)},1865473,388219);
Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.add(["naAnalyticsPageView"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var hostname1=document.location.hostname;var pathname1=document.location.pathname;var pagename2=citiData.pageName||" ";var cmpid=_dl.external_campaign_tracking_id||" ";if(cmpid.indexOf("afa")!=-1)if(pathname1.indexOf("/US/ag/cards/application/registration")!=
-1&&pagename2=="Citibank Card Application nga \u2013 approved and registration")Bootstrapper.ensEvent.trigger("NGA_application_registration");else if(pathname1.indexOf("/US/ag/cards/application/approved")!=-1&&pagename2=="Citibank Card Application - Application Received")Bootstrapper.ensEvent.trigger("NGA_application_approved");else if(pathname1.indexOf("/US/ag/cards/application/pend-resolution")!=-1)Bootstrapper.ensEvent.trigger("NGA_application_pend_resolution");else if(pathname1.indexOf("/US/ag/cards/application/declined")!=
-1)Bootstrapper.ensEvent.trigger("NGA_application_declined");else if(pathname1.indexOf("/US/ag/cards/application/pended")!=-1)Bootstrapper.ensEvent.trigger("NGA_application_pended")})},3709544,704091);