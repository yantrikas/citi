"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}window.configs={commonApi:{apiServerUrl:"https://sit.api.citi.com/gcgapi/dynamic/public/v1/",appID:"tagging_transformation",currentUATEnv:"uat1"},apiClientId:{dit1:"6e919cb7-cdeb-4035-87e8-e55bd4c49c05",dit2:"4b857a5e-3392-4eeb-bc30-6c502c20ba4c",dit3:"4278ee95-fbbd-4caa-8c48-d95c4a299cf7",sit1:"7a90cd2f-6c09-4fd4-a98c-b25df90a689f",sit2:"caa0e9cd-5d4a-4171-914d-430ae4b59949",sit3:"caa0e9cd-5d4a-4171-914d-430ae4b59949",uat1:"1c95feec-b029-4112-8394-033ba19cb7de",uat2:"3ea31584-77fb-4b6d-bec2-65a45cae1664",uat3:"6a755087-ac37-4847-99a2-110c8da4f6b6",perf:"edafa16a-aa4f-4d4b-acdb-a25203af1480",prod:"4a51fb19-a1a7-4247-bc7e-18aa56dd1c40",load:"edafa16a-aa4f-4d4b-acdb-a25203af1480",localhost:"1234"},endpointURIs:{ccidUri:"digital/cmr/profiles/customers/idDetails/retrieve",errorLoggingUri:"v1/digital/foundations/tagging/errorLogging"},udoKeys:["SUBGROUP_TYPE","GROUP_TYPE","SET_NOTIFICATION","CONTENT_ID","NAME","event_name"],renameUDOKeys:{form_step:"link_name"},ecmCookieMapping:{p1:{propertyName:"Customer Tier",cookiePosition:""},p2:{propertyName:"Investment Account Status",cookiePosition:""},p3:{propertyName:"AutoPay Enrollment Status",cookiePosition:"3"},p4:{propertyName:"CD Ownership Status",cookiePosition:"13"},p5:{propertyName:"Checking Plus Status",cookiePosition:"15"},p6:{propertyName:"Credit Card Status",cookiePosition:"16"},p7:{propertyName:"Mortgage Status",cookiePosition:"17"},p8:{propertyName:"Savings Account Status",cookiePosition:"18"},p9:{propertyName:"Customer Tenure",cookiePosition:""},p10:{propertyName:"ThankYou Enrollment Status",cookiePosition:"27"},p11:{propertyName:"Alerts Usage Status",cookiePosition:"2"},p12:{propertyName:"Paperless Billing Status",cookiePosition:"25"},p13:{propertyName:"Checking Account Status",cookiePosition:"14"},p14:{propertyName:"Balance Transfer Eligibility",cookiePosition:""},p15:{propertyName:"Bill Presentment Status",cookiePosition:"5"},p16:{propertyName:"Bank Account Type",cookiePosition:""},p17:{propertyName:"Citi Private Client",cookiePosition:"22"},p18:{propertyName:"Global Executive Banker",cookiePosition:"23"},p19:{propertyName:"Small Business Customer",cookiePosition:"28"},p20:{propertyName:"Business Only Account",cookiePosition:"29"},p21:{propertyName:"Mortgage Only Account",cookiePosition:"31"},p22:{propertyName:"Net Purchase Amount",cookiePosition:"41"},p23:{propertyName:"Revolving Percent",cookiePosition:"42"},p24:{propertyName:"Wallet Segment",cookiePosition:"44"},p25:{propertyName:"Mobile Active User",cookiePosition:"47"},p26:{propertyName:"Debit Card Owner",cookiePosition:""},p27:{propertyName:"International Personal Bank Status",cookiePosition:""},p28:{propertyName:"Private Banking Group Status",cookiePosition:"26"},p29:{propertyName:"Active Mobile Check Deposit",cookiePosition:""},p30:{propertyName:"Direct Deposit",cookiePosition:""},p31:{propertyName:"Past Due",cookiePosition:""}},validationRule:{domain:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},CCSID:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"number",expectedLength:"5"},CCID:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"number",expectedLength:"5"},CUUID:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},site_name:{validationRequired:true,validationTypes:["values"],expectedValues:["US"],expectedDataType:"string",expectedLength:"5"},action_type:{validationRequired:true,validationTypes:["dataType","values"],expectedValues:["page view","event"],expectedDataType:"string",expectedLength:"5"},customer_profile_string:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},s_vi:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},platform_type:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},url:{validationRequired:true,validationTypes:["dataType"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"},authentication_status:{validationRequired:true,validationTypes:["values"],expectedValues:["not authenticated","authenticated"],expectedDataType:"string",expectedLength:"5"},language:{validationRequired:true,validationTypes:["dataType"],expectedValues:["en_US","es_US"],expectedDataType:"string",expectedLength:"5"},authentication_type:{validationRequired:true,validationTypes:["values"],expectedValues:["citi.com"],expectedDataType:"string",expectedLength:"5"}}};if(typeof Object.assign!=="function"){var copyNextSource=function copyNextSource(nextSource,to){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}};Object.defineProperty(Object,"assign",{value:function value(target,varArgs){if(target===null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!==null){copyNextSource(nextSource,to)}}return to},writable:true,configurable:true})}window.taggingDataLayer=function(){var publicObject={updateEventData:updateEventData,applicationData:applicationData,makeCMSCallPromise:makeCMSCallPromise,addAppData:addAppData,processCmsData:processCmsData,getCCIDFromCCSID:getCCIDFromCCSID,getErrorFormat:getErrorFormat,setErrorLogs:setErrorLogs,getEnvironmentDetails:getEnvironmentDetails,setPlatformType:setPlatformType};var configObject=window.configs||{};var environnmentName=getEnvironmentDetails(window.location.hostname);var envName=getEnvironmentIndex();var apiURL=getApiURL(environnmentName);var appId=configObject.commonApi?configObject.commonApi.appID:null;var deltaAppId="tagging_transformation_homepage_and_login";var mrcDashboardAppId="tagging_transformation_mrc_dashboard";var cardAccountdetailsAppId="tagging_transformation_account_details";var loginRedirectAppId="tagging_transformation_login_with_redirect";var dashboardAppId="tagging_transformation_dashboard_2";var makePaymentAppId="tagging_transformation_make_a_payment";var bankAccountActivityAppId="tagging_transformation_bank_account_activity";var accountStatementAppId="tagging_transformation_account_statement";var updatedEventDataFromCMS;var udoObject={};var appLoad=false;var appContentFailed=false;var parsedJsonResponse={};var udoObjectWithoutAdditonalKeys={};var ccsId="";var appContentId={};var appDynamicValue={};var ccidCookieManager={};var errFormat={date:(new Date).toDateString(),applicationName:"CBOL",browser:navigator.userAgent,pageUrl:window.location.href,dataTemplateUri:"",errorLogs:[]};var isDbcp=window.location.hostname.toLowerCase().indexOf("digitalcardsportal")!==-1||window.location.hostname.toLowerCase().indexOf("digitalbankcardsportal")!==-1;var requestStatus={};var aempageStatus="false";if(window._dl){if(window._dl.aemPage==="true"){aempageStatus="true"}}var error_handler="";function getErrorFormat(){return errFormat}function setErrorLogs(errorLogs){errFormat.errorLogs=errorLogs}function isICMSContent(contentId){return contentId!=="nonicms_content"}function makeCMSCallPromise(customerId,resolve,reject){if(aempageStatus==="true"||isDbcp){processCmsData(null,customerId);resolve(true)}else{var requestURL="";if(environnmentName!=="local"){if(window.location.pathname==="/"){appId=deltaAppId}else if(window.location.pathname.includes("/US/ag/mrc/dashboard")){appId=mrcDashboardAppId}else if(window.location.pathname.includes("/US/ag/accountdetails")){appId=cardAccountdetailsAppId}else if(window.location.pathname.includes("/login")){appId=loginRedirectAppId}else if(window.location.pathname.includes("/US/ag/dashboard")){appId=dashboardAppId}else if(window.location.pathname.includes("/US/ag/payments/crecarpay")){appId=makePaymentAppId}else if(window.location.pathname.includes("/US/ag/accountactivity")){appId=bankAccountActivityAppId}else if(window.location.pathname.includes("/US/ag/accstatement")){appId=accountStatementAppId}else{appId=window.configs.commonApi.appID}requestURL=apiURL+"staticcms/USGCB/en_US/appid/"+appId+".json"}else{requestURL="http://localhost:4200/assets/sitecat.json"}var data=sessionStorage.getItem(requestURL);if(data&&requestURL){processCmsData(data,customerId);resolve(true)}else{var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){if(this.readyState===4&&this.status===200){sessionStorage.setItem(requestURL,this.responseText);processCmsData(this.responseText,customerId);resolve(true)}};xhttp.open("GET",requestURL,true);xhttp.setRequestHeader("client_id",configObject.apiClientId[envName]);xhttp.setRequestHeader("appVersion","CBOLV1.0.0");xhttp.send()}}}function getCCIDFromCCSID(ccsid,cb){if((aempageStatus==="true"||isDbcp)&&cb){cb()}else{var xhttp=new XMLHttpRequest;var customerId=ccidCookieManager.getCookie();var ccidExpire=ccidCookieManager.getccidExpire();if(ccidExpire&&customerId){cb&&cb(customerId);sessionStorage.setItem("ccId",customerId);return}if(sessionStorage.getItem("matchCCSID")&&cb){cb();return}var apiURL=getApiURL();if(environnmentName=="local"){apiURL="http://localhost:4200/assets/sitecat.json"}else{apiURL+=configObject.endpointURIs.ccidUri}xhttp.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){requestStatus[apiURL].status="COMPLETED";var ccidResponse=JSON.parse(this.responseText);sessionStorage.setItem(apiURL,this.responseText);if(ccidResponse&&ccidResponse.customerDetails){var cDB=[];ccidResponse.customerDetails.forEach(function(v,k){cDB.push(v.ccid)});customerId=cDB.join(",");ccidCookieManager.setCookie(customerId);sessionStorage.setItem("ccId",customerId)}cb&&cb(customerId)}else if(this.status==204){sessionStorage.setItem("matchCCSID","true");cb&&cb()}else{cb&&cb(customerId)}}};var params={searchType:"CCSID",customerIdDetails:[{customerIdValue:ccsid,customerIdType:"CCSID"}]};if(requestStatus[apiURL]&&requestStatus[apiURL].status==="LOADING"){requestStatus[apiURL].callbacks.push(cb);return}var ccidData=sessionStorage.getItem(apiURL);if(ccidData&&apiURL){processCmsData(JSON.parse(ccidData),customerId)}else{var cuu_id=_getCookie("CUUID");requestStatus[apiURL]={status:"LOADING",callbacks:[cb]};xhttp.open("POST",apiURL,true);xhttp.setRequestHeader("Content-type","application/json");xhttp.setRequestHeader("citiUuid",cuu_id);xhttp.setRequestHeader("uuid",cuu_id);xhttp.setRequestHeader("channelId","CBOL");xhttp.setRequestHeader("appVersion","CBOLV1.0.0");if(isLoggedIn()){var authCookie=_getCookie("NGACoExistenceCookie");if(authCookie!=undefined&&authCookie!==null){authCookie=authCookie.split("|");if(authCookie.length>=2){var authToken=authCookie[0].split("authToken=");var bizToken=authCookie[1].split("bizToken=");var clientId=authCookie[2].split("clientId=");xhttp.setRequestHeader("bizToken",bizToken[1]);xhttp.setRequestHeader("Authorization","Bearer "+authToken[1]);xhttp.setRequestHeader("client_id",clientId[1])}}else{var bizToken=_getCookie("bizToken");var clientId=_getCookie("client_id");var authToken=_getCookie("Authorization");xhttp.setRequestHeader("bizToken",bizToken);xhttp.setRequestHeader("Authorization","Bearer "+authToken);xhttp.setRequestHeader("client_id",clientId)}}xhttp.send(JSON.stringify(params))}}}ccidCookieManager={getCookie:function getCookie(){var ccid_ccsid=_getCookie("ccid_ccsid");var ccsId=getCcsId();if(ccid_ccsid){var ccsidv=ccid_ccsid.split("|");if(ccsidv&&ccsidv.length===2&&ccsId===ccsidv[1]){return ccsidv[0]}}},setCookie:function setCookie(ccid){ccsId=getCcsId();_setCookie("ccid_ccsid",ccid+"|"+ccsId,180);_setCookie("ccidUpdate","true",1)},getccidExpire:function getccidExpire(){var ccidExp=_getCookie("ccidUpdate");return ccidExp}};function processCmsData(response){getDataLayerObject(response);if(appContentFailed){setApplicationData(appContentId,appDynamicValue)}if(errFormat.errorLogs&&errFormat.errorLogs.length>0){}window._prev_dl=window._dl}if(!window._stopAutoCallCmsData){var isDbcp=window.location.hostname.toLowerCase().indexOf("digitalcardsportal")!==-1||window.location.hostname.toLowerCase().indexOf("digitalbankcardsportal")!==-1;if(isLoggedIn()&&!isDbcp){getCCIDFromCCSID(getCcsId())}}function getCcsId(){var ccsId=_getCookie("CCSID");if(ccsId&&ccsId!="undefined"&&ccsId!="null"){return ccsId}else if(typeof sessionStorage!="undefined"&&sessionStorage.getItem("sessionPostBrandingStorage")){var sessionCcsId;try{var sessionPostBrandingStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");if(sessionPostBrandingStorageObject){sessionPostBrandingStorageObject=JSON.parse(sessionPostBrandingStorageObject);ccsId=sessionPostBrandingStorageObject.siteCatalystBean.ccsid;sessionCcsId=ccsId}}catch(e){sessionCcsId=null}return sessionCcsId}}function getEnvironmentDetails(browserUrl){var browserUrl=window.location.hostname;if(browserUrl.match("/dit.")||browserUrl.match("dit45")||browserUrl.match("dit01")||browserUrl.match("dit41")||browserUrl.match("dit42")||browserUrl.match("dit02")||browserUrl.match("dit03")||browserUrl.match("dit49")||browserUrl.match("dit36")||browserUrl.match("sd-6bdc-b56d.nam.nsroot.net")||browserUrl.match("productest5.accountonline")||browserUrl.match("productest6")||browserUrl.match("sit53")||browserUrl.match("dit121")||browserUrl.match("dit131")||browserUrl.match("sit9")||browserUrl.match("dit54")||browserUrl.match("dit55")||browserUrl.match("sit54")||browserUrl.match("dit16")||browserUrl.match("dit63")||browserUrl.match("dit52")||browserUrl.match("dit13")||browserUrl.match("dit39")||browserUrl.match("dit12")||browserUrl.match("dit38")||browserUrl.match("dit33")||browserUrl.match("dit18")||browserUrl.match("dit19")){return"dit"}else if(browserUrl.match("/sit.")||browserUrl.match("sit05")||browserUrl.match("sit17")||browserUrl.match("sit21")||browserUrl.match("sit9")||browserUrl.match("sit48")||browserUrl.match("sit28")||browserUrl.match("productest5.creditcards")||browserUrl.match("sit54")||browserUrl.match("sit52")||browserUrl.match("sit6")||browserUrl.match("sit38")||browserUrl.match("sit58")||browserUrl.match("sit31")||browserUrl.match("sit33")||browserUrl.match("sit19")){return"sit"}else if(browserUrl.match("test01.creditcards")||browserUrl.match("test02.creditcards")||browserUrl.match("test03.creditcards")||browserUrl.match("test04.creditcards")||browserUrl.match("test01.accountonline")||browserUrl.match("test02.accountonline")||browserUrl.match("test03.accountonline")||browserUrl.match("test04.accountonline")||browserUrl.match("uat1")||browserUrl.match("uat2")||browserUrl.match("uat3")||browserUrl.match("uat4")||browserUrl.match("sit7")||browserUrl.match("sit46")||browserUrl.match("uat01")||browserUrl.match("uat02")||browserUrl.match("uat03")){return"uat"}else if(browserUrl.match("webqa1")||browserUrl.match("webqa2")||browserUrl.match("webqa01")||browserUrl.match("webqa02")||browserUrl.match("pat.digitalbankcardsportal")){return"perf"}else if(browserUrl.match("loadtest")){return"load"}else if(browserUrl.match("online.citi.com")||browserUrl.match(".citicards.")||browserUrl.match("digitalbankcardsportal")||browserUrl.match("w.citi")){return"prod"}else{return"local"}}function getEnvironmentIndex(){var currentEnv=configObject.commonApi.currentUATEnv;if(environnmentName=="local"||environnmentName=="prod"||environnmentName=="perf"||environnmentName=="load"){return environnmentName}if(environnmentName=="dit"||environnmentName=="sit"){return environnmentName+currentEnv.replace("uat","")}else if(environnmentName=="uat"){var url=window.location.hostname;return url.match("uat1")||url.match("test01")?"uat1":url.match("uat2")||url.match("test02")?"uat2":url.match("uat3")||url.match("test03")||url.match("test04")?"uat3":currentEnv}}function getApiURL(){var tmpUrl=configObject.commonApi.apiServerUrl;var tmpDynamic="";if(environnmentName=="local"){tmpUrl="http://localhost:4200/assets/sitecat.json"}else if(environnmentName=="prod"||environnmentName=="perf"||environnmentName=="load"){var tmpSit="online";tmpDynamic="prod";var url=window.location.hostname;if(url.match("webqa1")||url.match("webqa01")){tmpSit="webqa1.online";tmpDynamic="sb"}if(url.match("webqa2")||url.match("loadtest")||url.match("webqa02")||url.match("pat.digitalbankcardsportal")){tmpSit="webqa2.online";tmpDynamic="sb"}tmpUrl=tmpUrl.replace("sit.api",tmpSit)}else{tmpDynamic=getEnvironmentIndex();if(environnmentName=="dit"){tmpDynamic=tmpDynamic.replace("dit","dev")}}tmpUrl=tmpUrl.replace("dynamic",tmpDynamic);return tmpUrl}function getDataLayerObject(cmsData){try{parsedJsonResponse=JSON.parse(cmsData)}catch(e){console.warn("Cms data parse error!");parsedJsonResponse=null}if(parsedJsonResponse===null||environnmentName==="local"){udoObject={CONTENT_ID:"udo_template",CUUID:"#",GROUP_TYPE:"Container",NAME:"Common properties",SET_NOTIFICATION:"N",SUBGROUP_TYPE:"Container",action_type:"#",authentication_status:"#",common_hierarchy:"us|web",country:"#",customer_profile_string:"#",domain:"#",evarPageName:"#",language:"#",lob:"#",platform_type:"#",s_vi:"#",site_hierarchy:"#",site_name:"US",test_id:"#",track_id:"#",url:"#",user_agent:"#",user_id:"#"}}else{udoObject=parsedJsonResponse["content"][appId]["copy$$udo_template"]}udoObjectWithoutAdditonalKeys=removeAdditonalKeys(udoObject)||{};window._dl=eCMcookieMapping(udoObjectWithoutAdditonalKeys)}function removeAdditonalKeys(objectName){var udoKeys=configObject.udoKeys;var renameUDOObj=configObject.renameUDOKeys;var renameUDOKeys=Object.keys(renameUDOObj);try{Object.keys(objectName).forEach(function(key){if(udoKeys.indexOf(key)!==-1){delete objectName[key]}if(renameUDOKeys.indexOf(key)!==-1){for(var i=0;i<renameUDOKeys.length;i++){if(key==renameUDOKeys[i]){var newKey=renameUDOObj[renameUDOKeys[i]];objectName[newKey]=objectName[key];delete objectName[key];if(objectName["action_type"]!=="event"){delete objectName["link_name"]}}}}})}catch(err){addErrorToErrorLog(err);error_handler=error_handler+";"+err}return objectName}function mapAppKeyToUDO(appDataObject){try{Object.keys(appDataObject).forEach(function(key){_dl[key]=appDataObject[key]})}catch(err){addErrorToErrorLog(err);error_handler=error_handler+";"+err}}function applicationData(appContentId,appDynamicValue){if(!isICMSContent(appContentId)){getDataLayerObject(null);setApplicationData(appContentId,appDynamicValue)}else{var cmsCallPromise=new Promise(function(resolve,reject){var customerId=ccidCookieManager.getCookie();var ccidExpire=ccidCookieManager.getccidExpire();if(ccidExpire&&customerId){makeCMSCallPromise(customerId,resolve,reject)}else{makeCMSCallPromise(null,resolve,reject)}});cmsCallPromise.then(function(data){if(data){setApplicationData(appContentId,appDynamicValue)}})}}function setApplicationData(appContentId,appDynamicValue,customerId){try{clearPreviousUDOData();setSviCookie(_dl);if((_getCookie("ccid_ccsid")===null||_getCookie("ccid_ccsid")==undefined||_getCookie("ccidUpdate")===null||_getCookie("ccidUpdate")===undefined)&&(_getCookie("ccid_ccsid")!=getCcsId()||isLoggedIn()&&!isDbcp)){getCCIDFromCCSID(getCcsId())}getDefaultData(window._dl);var customerId=ccidCookieManager.getCookie();if(typeof appContentId==="string"){var appData=isICMSContent(appContentId)?parsedJsonResponse["content"][appId]["copy$$"+appContentId]:appDynamicValue;appData=removeAdditonalKeys(appData);mapAppKeyToUDO(appData);if(appDynamicValue&&isICMSContent(appContentId)){addAppData(_dl,appDynamicValue)}setEvarPageName(_dl);setSiteSection(_dl);setEventName(_dl);trackId(_dl);setPageType(_dl);setSiteEvent(_dl);setResponsiveData(_dl);setLob(_dl);setDynamicCount(_dl);setCitiProducts(_dl);setCardUserType(_dl)}else if(_typeof(appContentId)==="object"){addAppData(_dl,appContentId)}setCCsId(_dl);if(customerId){setCCID(_dl)}setLanguage(_dl);setCountry(_dl);setCuuIdCookie(_dl);setCustType(_dl);setUserAgent(_dl);setECMCookie(_dl);setDomain(_dl);setCustomerProfileString(_dl);setPlatformType(navigator.userAgent||navigator.vendor||window.opera,_dl);setSpaValue(_dl);setURL(_dl);setEmpFeedback(_dl);setAutheticationStatus(_dl);setInternalSearchTerm(_dl);setFundingAmount(_dl);setInternalTrackingCode(_dl);setInternalCampaignClickthroughs(_dl);setExternalTrackingCode(_dl);setErrorHandler(error_handler);appLoad=true;_trackAnalytics(window._dl);validateDatalayer(window._dl)}catch(err){addErrorToErrorLog(err);error_handler=error_handler+";"+err}}function addAppData(parentObject,appSpecificData){if(appSpecificData){Object.assign(parentObject,appSpecificData)}}function eCMcookieMapping(udoObjectWithoutAdditonalKeys){try{var ecmCookie=_getCookie("CBOLECM");var cookieMapFromConfig=configObject.ecmCookieMapping;var profilesObject={};if(ecmCookie){var splitCookie=ecmCookie.split("-");var index=1;splitCookie.forEach(function(){if(cookieMapFromConfig["p"+index]){var cookieIndex=cookieMapFromConfig["p"+index].cookiePosition;profilesObject["p"+index]=splitCookie[cookieIndex-1]}index++});udoObjectWithoutAdditonalKeys["p"]=profilesObject}}catch(err){udoObjectWithoutAdditonalKeys["p"]={};addErrorToErrorLog(err);error_handler=error_handler+";"+err}return udoObjectWithoutAdditonalKeys}function _getCookie(name){var c=""+document.cookie;var index=c.indexOf(name+"=");if(index===-1){return null}var endstr=c.indexOf(";",index);if(endstr===-1){endstr=c.length}return unescape(c.substring(index+name.length+1,endstr))}function _setCookie(cname,cvalue,exdays){var Db=[];var d=new Date;var domain=".citi.com";d.setTime(d.getTime()+exdays*24*60*60*1e3);Db.push(cname,"=",cvalue);Db.push("; expires=",d.toUTCString());Db.push("; path=/");Db.push("; domain=",domain);document.cookie=Db.join("")}function clearPreviousUDOData(){if(window._prev_dl){window._dl=Object.assign({},window._prev_dl)}}function updateEventData(eventData,eventDataFromApp){if(!isICMSContent(eventData)){getDataLayerObject(null);updateEventDataAfterCmsCall(eventData,eventDataFromApp)}else{var cmsCallPromise=new Promise(function(resolve,reject){var customerId=ccidCookieManager.getCookie();var ccidExpire=ccidCookieManager.getccidExpire();if(ccidExpire&&customerId){makeCMSCallPromise(customerId,resolve,reject)}else{makeCMSCallPromise(null,resolve,reject)}});cmsCallPromise.then(function(data){if(data){updateEventDataAfterCmsCall(eventData,eventDataFromApp)}})}}function updateEventDataAfterCmsCall(eventData,eventDataFromApp,customerId){try{clearPreviousUDOData();if((_getCookie("ccid_ccsid")===null||_getCookie("ccid_ccsid")==undefined||_getCookie("ccidUpdate")===null||_getCookie("ccidUpdate")===undefined)&&(_getCookie("ccid_ccsid")!=getCcsId()||isLoggedIn()&&!isDbcp)){getCCIDFromCCSID(getCcsId())}getDefaultData(window._dl);var customerId=ccidCookieManager.getCookie();var updatedEventData,eventSpecificData={};var eventLevelAttributes=getValuesFromDl();if(arguments.length===1){if(typeof eventData==="string"){eventSpecificData=removeAdditonalKeys(parsedJsonResponse["content"][appId]["copy$$"+eventData]);updatedEventData=Object.assign(eventLevelAttributes,eventSpecificData)}else if(_typeof(eventData)==="object"){updatedEventData=Object.assign(eventLevelAttributes,eventData)}}else{var eventSpecificData=isICMSContent(eventData)?parsedJsonResponse["content"][appId]["copy$$"+eventData]:eventDataFromApp;eventSpecificData=removeAdditonalKeys(eventSpecificData);updatedEventDataFromCMS=Object.assign(eventLevelAttributes,eventSpecificData);updatedEventData=isICMSContent(eventData)?Object.assign(updatedEventDataFromCMS,eventDataFromApp):updatedEventDataFromCMS}setEvarPageName(updatedEventData);setSiteSection(updatedEventData);setSiteEvent(updatedEventData);setEventName(updatedEventData);setInternalTrackingCode(updatedEventData);setInternalCampaignClickthroughs(updatedEventData);trackId(updatedEventData);setPageType(updatedEventData);setDynamicCount(updatedEventData);setProductDetails(updatedEventData);setInternalSearchTerm(updatedEventData);setExternalTrackingCode(updatedEventData);setFundingAmount(updatedEventData);setCitiProducts(updatedEventData);if(customerId){setCCID(updatedEventData)}setCardUserType(updatedEventData);setErrorHandler(error_handler);validateDatalayer(updatedEventData);_trackAnalytics(updatedEventData);if(errFormat.errorLogs&&errFormat.errorLogs.length>0){}}catch(err){addErrorToErrorLog(err);error_handler=error_handler+";"+err}}function getValuesFromDl(){var url=setURL({});var CUUID=setCuuIdCookie({});var user_id=setCCsId({});var user_agent=setUserAgent({});var _setAutheticationStat=setAutheticationStatus({}),login_status=_setAutheticationStat.login_status,authentication_status=_setAutheticationStat.authentication_status;var p=_dl.p;var lob=setLob({});var s_vi=setSviCookie({});var customer_profile_string=setCustomerProfileString({});var spa_page=setSpaValue({});var domain=setDomain({});var site_name="US";var platform_type=setPlatformType(navigator.userAgent||navigator.vendor||window.opera,{platform_type:""});var _setResponsiveData=setResponsiveData({}),Platform=_setResponsiveData.Platform;var language=setLanguage({});var country=setCountry({});var cust_type=setCustType({});var _setECMCookie=setECMCookie({}),cbol_ecm_01_25=_setECMCookie.cbol_ecm_01_25,cbol_ecm_26_50=_setECMCookie.cbol_ecm_26_50,cbol_ecm_51_75=_setECMCookie.cbol_ecm_51_75;var ff_employeeFeedback=setEmpFeedback({});return{url:url,CUUID:CUUID,user_id:user_id,user_agent:user_agent,authentication_status:authentication_status,p:p,lob:lob,login_status:login_status,s_vi:s_vi,customer_profile_string:customer_profile_string,spa_page:spa_page,domain:domain,site_name:site_name,platform_type:platform_type,Platform:Platform,language:language,country:country,cust_type:cust_type,cbol_ecm_01_25:cbol_ecm_01_25,cbol_ecm_26_50:cbol_ecm_26_50,cbol_ecm_51_75:cbol_ecm_51_75,ff_employeeFeedback:ff_employeeFeedback}}function setEvarPageName(dataLayer){if(typeof dataLayer!="undefined"||typeof dataLayer["evarPageName"]!="undefined"){if(typeof dataLayer.app_hierarchy!="undefined"){if(typeof dataLayer["common_hierarchy"]!="undefined"){dataLayer["evarPageName"]=dataLayer.common_hierarchy.split("|").concat(dataLayer.app_hierarchy.split("|"))}else{dataLayer["evarPageName"]=udoObject.common_hierarchy.split("|").concat(dataLayer.app_hierarchy.split("|"))}}}else{error_handler=error_handler+";evarPageName is not available";addErrorToErrorLog("Key evarPageName is not available from CMS")}}function setSiteSection(dataLayer){var splitAppHierarchy=dataLayer.app_hierarchy.split("|");splitAppHierarchy.splice(-1,1);if(typeof dataLayer!="undefined"||typeof dataLayer["site_hierarchy"]!="undefined"){if(typeof dataLayer.app_hierarchy!="undefined"){if(typeof dataLayer["common_hierarchy"]!="undefined"){dataLayer["site_hierarchy"]=dataLayer.common_hierarchy.split("|").concat(splitAppHierarchy)}else{dataLayer["site_hierarchy"]=udoObject.common_hierarchy.split("|").concat(splitAppHierarchy)}}}else{error_handler=error_handler+";site_hierarchy is not available";addErrorToErrorLog("Key site_hierarchy is not available from CMS")}}function setEventName(dataLayer){var eventName=dataLayer["event name"];if(typeof eventName!=="undefined"){dataLayer["event_name"]=eventName;delete dataLayer["event name"]}}function setSiteEvent(dataLayer){var splitSiteEvent;if(typeof dataLayer!=="undefined"&&typeof dataLayer["event"]!=="undefined"){splitSiteEvent=(dataLayer.event||"").split("|");dataLayer["site_events"]=splitSiteEvent}else if(typeof dataLayer!=="undefined"&&typeof dataLayer["site_events"]!=="undefined"){splitSiteEvent=(dataLayer["site_events"]||"").split("|");dataLayer["site_events"]=splitSiteEvent}else{addErrorToErrorLog("Key site_events is not available from CMS")}}function setPageType(dataLayer){if(dataLayer||typeof dataLayer["page_type"]!=="undefined"){dataLayer["page_type"]=dataLayer.page_type}else{addErrorToErrorLog("Key page_type is not available from CMS")}}function trackId(dataLayer){if(typeof dataLayer!=="undefined"||typeof dataLayer["track_id"]!=="undefined"){var randomNum=Math.floor(Math.random()*1e10),currentTime=new Date;dataLayer["track_id"]=randomNum+"|"+currentTime.toISOString()}else{error_handler=error_handler+";track_id is not available";addErrorToErrorLog("Key track is not available from CMS")}}function setProductDetails(dataLayer){if(dataLayer.products_details_view){_dl.products_details_view=dataLayer.products_details_view}else if(dataLayer.products){_dl.products=dataLayer.products}else{addErrorToErrorLog("Product Details Not available")}}var setLob=function setLob(dataLayer){var getEcmCookie=_getCookie("CBOLECM");var isPost=dataLayer.evarPageName&&dataLayer.evarPageName[2];if(getEcmCookie&&getEcmCookie!=""&&getEcmCookie!="undefined"&&getEcmCookie!="null"&&isPost=="secure"){var splitEcmCookie=getEcmCookie.split("-");dataLayer.lob="bank";if((splitEcmCookie[17]=="Y"||splitEcmCookie[13]=="Y"||splitEcmCookie[14]=="Y")&&(splitEcmCookie[15]=="Y"||splitEcmCookie[5]=="Y")&&splitEcmCookie[16]=="Y"){dataLayer.lob="bank_cards_rel"}else if((splitEcmCookie[15]=="Y"||splitEcmCookie[5]=="Y")&&splitEcmCookie[16]=="Y"){dataLayer.lob="cards_rel"}else if((splitEcmCookie[17]=="Y"||splitEcmCookie[13]=="Y"||splitEcmCookie[14]=="Y")&&splitEcmCookie[16]=="Y"){dataLayer.lob="bank_rel"}else if((splitEcmCookie[17]=="Y"||splitEcmCookie[13]=="Y"||splitEcmCookie[14]=="Y")&&(splitEcmCookie[15]=="Y"||splitEcmCookie[5]=="Y")){dataLayer.lob="bank_cards"}else if(splitEcmCookie[17]=="Y"||splitEcmCookie[13]=="Y"||splitEcmCookie[14]=="Y"){dataLayer.lob="bank"}else if(splitEcmCookie[15]=="Y"||splitEcmCookie[5]=="Y"){dataLayer.lob="cards"}else if(splitEcmCookie[30]=="Y"){dataLayer.lob="rel"}}else if(typeof sessionStorage!="undefined"&&sessionStorage.getItem("sessionPostBrandingStorage")&&!isDbcp){var sessionStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");if(sessionStorageObject){sessionStorageObject=JSON.parse(sessionStorageObject);if(sessionStorageObject.siteCatalystBean){dataLayer.lob=sessionStorageObject.siteCatalystBean.lob;if(dataLayer.lob){dataLayer.lob=dataLayer.lob.toLowerCase()}}}}else{delete dataLayer["lob"]}return dataLayer.lob};function setCitiProducts(dataLayer){var sessionPostBrandingStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");if(sessionPostBrandingStorageObject&&!isDbcp){sessionPostBrandingStorageObject=JSON.parse(sessionPostBrandingStorageObject);var citiProducts=sessionPostBrandingStorageObject.siteCatalystBean.citiProducts;if(citiProducts){var tmpCitiProducts=citiProducts.split("|");if(tmpCitiProducts.length==2){citiProducts=tmpCitiProducts[1]}dataLayer.citi_products=citiProducts}}}function setCardUserType(dataLayer){var sessionPostBrandingStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");if(sessionPostBrandingStorageObject&&!isDbcp){sessionPostBrandingStorageObject=JSON.parse(sessionPostBrandingStorageObject);var userType=sessionPostBrandingStorageObject.siteCatalystBean.userType;dataLayer.card_user_type=userType}}function setLobOfBankCardAndRel(dataLayer,splitEcmCookie){if([splitEcmCookie[17],splitEcmCookie[13],splitEcmCookie[14]].indexOf("Y")>=0){dataLayer.lob="bank"}else if([splitEcmCookie[15],splitEcmCookie[5]].indexOf("Y")>=0){dataLayer.lob="cards"}else if(splitEcmCookie[30]==="Y"){dataLayer.lob="rel"}}function setLobSessionStorage(dataLayer){if(sessionStorage.getItem("sessionPostBrandingStorage")){var sessionStorageObject=JSON.parse(sessionStorage.getItem("sessionPostBrandingStorage"));if(sessionStorageObject.siteCatalystBean){dataLayer.lob=sessionStorageObject.siteCatalystBean.lob;if(dataLayer.lob){dataLayer.lob=dataLayer.lob.toLowerCase()}}}}function getDefaultData(dl){var defaultFields=["country","common_hierarchy","evarPageName","site_hierarchy","test_id","action_type","CCSID","cust_type","spa_page","domain","ccid","CUUID","site_name","customer_profile_string","s_vi","platform_type","url","authentication_status","language","authentication_type","user_id","track_id","user_agent","lob","p","cbol_ecm","cbol_ecm_01_25","cbol_ecm_26_50","cbol_ecm_51_75","card_user_type","Platform","responsive_design_data","ff_employeeFeedback","internal_campaign_tracking_id","external_campaign_tracking_id"];if(window._prev_dl){var key="";for(key in dl){if(!defaultFields.includes(key)){delete dl[key]}}}window._dl=dl}function setCCsId(dataLayer){var ccsId=getCcsId();if(typeof ccsId!=="undefined"){dataLayer["user_id"]=ccsId}else if(typeof ccsId=="undefined"||typeof ccsId==null){delete dataLayer["user_id"]}else{error_handler=error_handler+";CCSID is not available";addErrorToErrorLog("Key user_id is not available from CMS")}return ccsId}function setSviCookie(dataLayer){var s_vi=_getCookie("s_vi");if(typeof dataLayer["s_vi"]!=="undefined"){dataLayer["s_vi"]=s_vi}else if(typeof dataLayer["s_vi"]=="undefined"||typeof dataLayer["s_vi"]==null){delete dataLayer["s_vi"]}else{addErrorToErrorLog("Key s_vi is not available from CMS")}return s_vi}function setDynamicCount(dataLayer){if(dataLayer.event&&(dataLayer.event||"").indexOf("dynamic_content_appearance_count")!=-1){var l=dataLayer.event.length;var n=(dataLayer.event||"").indexOf("=");if(n!=-1){dataLayer.dynamic_content_appearance_count=dataLayer.event.substring(n+1,l)}}}function setPlatformType(userAgent,dataLayer){var platform_type;if(typeof dataLayer["platform_type"]!=="undefined"){if(/Android|iPad|iPhone|iPod/i.test(userAgent)){platform_type="Mobile Responsive Page"}if(/Windows NT|Edge|Macintosh|Ubuntu|Trident/i.test(userAgent)){platform_type="Web browser"}if(/CrKey|Roku|AFTS|Nexus Player|AppleTV/i.test(userAgent)){platform_type="iOT"}dataLayer["platform_type"]=platform_type}else{addErrorToErrorLog("Key platform_type is not available from CMS")}return platform_type}function setCuuIdCookie(dataLayer){var cuu_id=_getCookie("CUUID");if(typeof dataLayer["CUUID"]!=="undefined"){dataLayer["CUUID"]=cuu_id}else if(typeof dataLayer["CUUID"]=="undefined"){delete dataLayer["CUUID"]}else{addErrorToErrorLog("Key CUUID is not available from CMS")}return cuu_id}function setCustomerProfileString(dataLayer){var custProfStr=_getCookie("CBOLECM");if(typeof dataLayer["customer_profile_string"]!=="undefined"&&custProfStr){dataLayer["customer_profile_string"]=custProfStr.replace(/-/g,"")}else if(typeof dataLayer["customer_profile_string"]=="undefined"||custProfStr=="undefined"||custProfStr==null){delete dataLayer["customer_profile_string"]}else{error_handler=error_handler+";CBOLECM is not available or not set in cookie";addErrorToErrorLog("Key CBOLECM is not available  from CMS or it is not set in cookie")}return custProfStr&&custProfStr.replace(/-/g,"")}function setURL(dataLayer){var urlSource=window.location.href;var check=urlSource.search("JFP_TOKEN");var url=urlSource;var removeJfp=urlSource.slice(0,check-1);if(check!==-1){url=removeJfp}if(typeof dataLayer["url"]!=="undefined"){dataLayer["url"]=url;return dataLayer["url"]}else{addErrorToErrorLog("Key url is not available from CMS")}return url}function setUserAgent(dataLayer){var userAgent=navigator.userAgent;if(typeof dataLayer["user_agent"]!=="undefined"){dataLayer["user_agent"]=userAgent}else if(typeof dataLayer["user_agent"]=="undefined"||typeof dataLayer["user_agent"]==null){delete dataLayer["user_agent"]}else{addErrorToErrorLog("Key user_agent is not available from CMS")}return userAgent}var setPageLoadTime=function setPageLoadTime(loadTime){if(typeof _dl["page_load_time"]!="undefined"){_dl["page_load_time"]=loadTime}else{addErrorToErrorLog("Key page_load_time is not available from CMS")}};function setDomain(dataLayer){if(typeof dataLayer["domain"]!=="undefined"){dataLayer["domain"]=window.location.hostname;validateKey("domain")}else{addErrorToErrorLog("Key domain is not available from CMS")}return window.location.hostname}function setAutheticationStatus(dataLayer){var coExistenceCookie=_getCookie("NGACoExistenceCookie");var isPostLogin=sessionStorage.getItem("sessionPostBrandingStorage");var isLoggedIn=_getCookie("isLoggedIn");if(coExistenceCookie||isPostLogin||isLoggedIn){dataLayer["authentication_status"]="authenticated";dataLayer["login_status"]="customer"}else{dataLayer["authentication_status"]="not authenticated";dataLayer["login_status"]="prospect"}return{authentication_status:dataLayer["authentication_status"],login_status:dataLayer["login_status"]}}function setInternalSearchTerm(dataLayer){var initialInternalSearchTerm=_dl["internal_search_term"]||dataLayer["internal_search_term"];var regexEmail=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var regexSsn=/^\d{3}-?\d{2}-?\d{4}$/;var regexFourDigitSequence=/[0-9]{4}/;if(initialInternalSearchTerm!==null&&initialInternalSearchTerm!==undefined&&initialInternalSearchTerm!==""){if(regexEmail.test(initialInternalSearchTerm.split("|"))||initialInternalSearchTerm.indexOf("@")){var str=initialInternalSearchTerm.split("");var maskArr=[];var len=str.indexOf("@");str.forEach(function(item,pos){pos<=len-1?maskArr.push("x"):maskArr.push(str[pos])});initialInternalSearchTerm=maskArr.join("")}if(regexFourDigitSequence.test(initialInternalSearchTerm)||regexSsn.test(initialInternalSearchTerm)){initialInternalSearchTerm=initialInternalSearchTerm.replace(/\d/g,"*")}dataLayer["internal_search_term"]=initialInternalSearchTerm}}function setLanguage(dataLayer){var pageLang=_getCookie("locale");var lang;if(pageLang==null||pageLang==undefined){dataLayer["language"]="en_US";lang=dataLayer.language}else if(typeof dataLayer["language"]!=="undefined"||_dl["language"]!=null){dataLayer["language"]=pageLang.includes("en_US")?"en_US":"es_US";lang=dataLayer.language}else{addErrorToErrorLog("Key language is not available from CMS")}return lang}function setCustType(dataLayer){var sessionPostStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");if(sessionPostStorageObject){sessionPostStorageObject=JSON.parse(sessionPostStorageObject);if(sessionPostStorageObject.isCitigold=="Y"){dataLayer["cust_type"]="CITIGOLD"}else if(sessionPostStorageObject.isBusinessCust=="Y"){dataLayer["cust_type"]="SBOB"}else if(sessionPostStorageObject.isCitipriority=="Y"){dataLayer["cust_type"]="CITIPRIORITY"}else{dataLayer["cust_type"]="CITIBLUE"}}return dataLayer.cust_type}function setEmpFeedback(dataLayer){var sessionPostStorageObject=sessionStorage.getItem("sessionPostBrandingStorage");dataLayer["ff_employeeFeedback"]="false";if(sessionPostStorageObject){sessionPostStorageObject=JSON.parse(sessionPostStorageObject);if(sessionPostStorageObject.entitlementFeatureFlags!==null&&sessionPostStorageObject.entitlementFeatureFlags!==undefined&&sessionPostStorageObject.entitlementFeatureFlags.featureSet!==undefined&&sessionPostStorageObject.entitlementFeatureFlags.featureSet!==null){if(sessionPostStorageObject.entitlementFeatureFlags.featureSet.length>0){var sessObj=sessionPostStorageObject.entitlementFeatureFlags.featureSet;var t=sessObj.filter(function(e){return"FS21Redesign"===e.id&&e.isVisible});if(t!==null&&t.length>0){var n=t[0].features.filter(function(e){return"ff_employeeFeedback"===e.id});if(n!==0&&n.length>0){var res=n[0].isVisible;if(res===true){dataLayer["ff_employeeFeedback"]="true"}else if(res===false){dataLayer["ff_employeeFeedback"]="false"}}}}}}return dataLayer.ff_employeeFeedback}function setFundingAmount(dataLayer){if(dataLayer.event&&(dataLayer.event||"").indexOf("funding_amount")!=-1){var l=dataLayer.event.length;var n=(dataLayer.event||"").indexOf("=");var m=(dataLayer.event||"").indexOf("|",n);if(m===-1){dataLayer.funding_amount=dataLayer.event.substring(n+1,l)}else{dataLayer.funding_amount=dataLayer.event.substring(n+1,m)}}}function setECMCookie(dataLayer){var captureECM=_getCookie("CBOLECM");if(captureECM&&captureECM!=""&&captureECM!="undefined"&&captureECM!="null"){var ecm26=0,ecm51=0,index25=0,index50=0;for(var i=0;i<captureECM.length;i++){if(captureECM[i]=="-"&&ecm26<25){ecm26++;index25=i}}for(var i=index25+1;i<captureECM.length;i++){if(captureECM[i]=="-"&&ecm51<25){ecm51++;index50=i}}dataLayer["cbol_ecm_01_25"]=captureECM.substring(0,index25);dataLayer["cbol_ecm_26_50"]=captureECM.substring(index25+1,index50);dataLayer["cbol_ecm_51_75"]=captureECM.substring(index50+1)}return{cbol_ecm_01_25:dataLayer.cbol_ecm_01_25,cbol_ecm_26_50:dataLayer.cbol_ecm_26_50,cbol_ecm_51_75:dataLayer.cbol_ecm_51_75}}function setCountry(dataLayer){var countryCode=_getCookie("locale");if(countryCode===null||countryCode===""){countryCode="US"}else{countryCode=countryCode.split("_")[1].toLowerCase()}if(typeof dataLayer["country"]!=="undefined"){dataLayer["country"]=countryCode}else if(typeof dataLayer["country"]=="undefined"||typeof dataLayer["country"]==null){delete dataLayer["country"]}else{addErrorToErrorLog("Key country is not available from CMS")}return countryCode}function setSpaValue(dataLayer){dataLayer["spa_page"]=typeof isSpaPage!=="undefined"?"true":"false";return dataLayer.spa_page}function setExternalTrackingCode(dataLayer){var subject=window.location.href;if(subject.search("cmp")!==-1||subject.search("CMP")!==-1){var match=/cmp=([A-Za-z0-9./-\W_]+)/i.exec(subject);if(match&&match!=""&&match!="undefined"&&match!="null"){var cmpVal=match[1].split("&")[0];dataLayer.external_campaign_tracking_id=cmpVal}}}function setInternalTrackingCode(dataLayer){var intUrl1=window.location.href;var intUrl=intUrl1.toLowerCase();var len=intUrl.length;var intCode;var intIndexCode;if(intUrl.search("intc")!==-1){intIndexCode=intUrl.search("intc");intCode=intUrl1.slice(intIndexCode+5,len)}if(intCode!==undefined&&intCode.includes("&")){var scrapExtra=intCode.search("&");intCode=intCode.slice(intCode,scrapExtra)}if(intCode){dataLayer.internal_campaign_tracking_id=intCode}}var setInternalCampaignClickthroughs=function setInternalCampaignClickthroughs(dataLayer){var internalCampaignTrackingCode=dataLayer.internal_campaign_tracking_id;if(internalCampaignTrackingCode){var siteEvents=dataLayer["site_events"];var eventName=dataLayer["event"];if(typeof siteEvents!=="undefined"){dataLayer["site_events"]=dataLayer["site_events"]+","+"internal_campaign_clickthrough"}else{dataLayer["site_events"]="internal_campaign_clickthroughs"}if(typeof eventName!=="undefined"){dataLayer["event"]=dataLayer["event"]+"|"+"internal_campaign_clickthrough"}else{dataLayer["event"]="internal_campaign_clickthroughs"}}};function setErrorHandler(errVal){if(errVal!==""){_dl.tagging_error_handler=errVal}}function setResponsiveData(dataLayer){var platform=getPlatform();var isResponsivePage=typeof isSpaPage!=="undefined"?"Yes":"No";dataLayer["responsive_design_data"]=window.innerWidth+"|"+platform+"|"+isResponsivePage;dataLayer["Platform"]=platform;return{responsive_design_data:dataLayer.responsive_design_data,Platform:dataLayer.Platform}}function setCustomerProspect(data){var isPostLogin=sessionStorage.getItem("sessionPostBrandingStorage");_dl["login_status"]=checkExistence||isPostLogin?"customer":"prospect"}function setCCID(dataLayer){var custCCID=ccidCookieManager.getCookie();if(custCCID){dataLayer["ccid"]=custCCID}else{dataLayer["ccid"]=""}return custCCID}function isLoggedIn(){var checkCcsid=_getCookie("NGACoExistenceCookie");var isPostLogin=sessionStorage.getItem("sessionPostBrandingStorage");var isLoggedIn=_getCookie("isLoggedIn");return checkCcsid||isPostLogin||isLoggedIn?true:false}function getPlatform(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"}function validateDatalayer(dataLayerObject){Object.keys(dataLayerObject).forEach(function(dataLayerkey){validateKey(dataLayerObject,dataLayerkey)})}function validateDataType(validateObject,dataLayerObject,keyName,i){var valTypeObject=validateObject[keyName];var valType=validateObject[keyName].validationTypes[i];var keyNotMatched=keyName+" is not matched";if(valType==="dataType"&&_typeof(dataLayerObject[keyName])!==valTypeObject.expectedDataType){addErrorToErrorLog("Data type of "+keyNotMatched,keyName,dataLayerObject[keyName],valTypeObject.expectedDataType)}else if(valType==="length"&&dataLayerObject[keyName].length!==valTypeObject.expectedLength){addErrorToErrorLog("Length of "+keyNotMatched,keyName,dataLayerObject[keyName],valTypeObject.expectedLength)}else if(valType==="values"&&valTypeObject.expectedValues.indexOf(dataLayerObject[keyName])===-1){addErrorToErrorLog("Value of "+keyNotMatched,keyName,dataLayerObject[keyName],valTypeObject.expectedValues)}}function validateKey(dataLayerObject,keyName){var validateObject=window.configs.validationRule;if(typeof validateObject[keyName]!=="undefined"){for(var i=0;i<validateObject[keyName].validationTypes.length;i++){validateDataType(validateObject,dataLayerObject,keyName,i)}}}function addErrorToErrorLog(error,errorFieldName,errorFieldValue,validFormat){errFormat.pageName=window._dl?window._dl["evarPageName"]:"";errFormat.errorLogs.push({errorDescription:error,errorFieldName:errorFieldName||"Unknown",errorFieldValue:errorFieldValue||"Unknown",validFormat:validFormat||"Unknown",failedUrl:window.location.href})}return publicObject}();